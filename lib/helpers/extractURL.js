"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.extractURL = void 0;
const jsdom = require("jsdom");
const { JSDOM } = jsdom;
global.DOMParser = new JSDOM().window.DOMParser;
const extractURL = (text) => {
    return extractFirstURLFromHTML(text) ?? extractFirstURL(text);
};
exports.extractURL = extractURL;
function extractFirstURLFromHTML(html) {
    const parser = new DOMParser();
    const doc = parser.parseFromString(html, 'text/html');
    const urlElements = Array.from(doc.querySelectorAll('a[href], img[src]'));
    for (const element of urlElements) {
        const url = element.href || element.src;
        if (url) {
            return url;
        }
    }
    return null;
}
function extractFirstURL(input) {
    const urlRegex = /(https?:\/\/[^\s]+)/g;
    const matches = input.match(urlRegex);
    if (matches && matches.length > 0) {
        return matches[0];
    }
    return null;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXh0cmFjdFVSTC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9oZWxwZXJzL2V4dHJhY3RVUkwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsTUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFBO0FBQzlCLE1BQU0sRUFBRSxLQUFLLEVBQUUsR0FBRyxLQUFLLENBQUE7QUFDdkIsTUFBTSxDQUFDLFNBQVMsR0FBRyxJQUFJLEtBQUssRUFBRSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUE7QUFFeEMsTUFBTSxVQUFVLEdBQUcsQ0FBQyxJQUFZLEVBQWlCLEVBQUU7SUFDdEQsT0FBTyx1QkFBdUIsQ0FBQyxJQUFJLENBQUMsSUFBRSxlQUFlLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDaEUsQ0FBQyxDQUFBO0FBRlksUUFBQSxVQUFVLGNBRXRCO0FBRUQsU0FBUyx1QkFBdUIsQ0FBQyxJQUFZO0lBQ3pDLE1BQU0sTUFBTSxHQUFHLElBQUksU0FBUyxFQUFFLENBQUM7SUFDL0IsTUFBTSxHQUFHLEdBQUcsTUFBTSxDQUFDLGVBQWUsQ0FBQyxJQUFJLEVBQUUsV0FBVyxDQUFDLENBQUM7SUFFdEQsTUFBTSxXQUFXLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxDQUFDO0lBRTFFLEtBQUssTUFBTSxPQUFPLElBQUksV0FBVyxFQUFFO1FBQy9CLE1BQU0sR0FBRyxHQUFJLE9BQTZCLENBQUMsSUFBSSxJQUFLLE9BQTRCLENBQUMsR0FBRyxDQUFDO1FBQ3JGLElBQUksR0FBRyxFQUFFO1lBQ0wsT0FBTyxHQUFHLENBQUM7U0FDZDtLQUNKO0lBRUQsT0FBTyxJQUFJLENBQUM7QUFDaEIsQ0FBQztBQUVELFNBQVMsZUFBZSxDQUFDLEtBQVk7SUFDakMsTUFBTSxRQUFRLEdBQUcsc0JBQXNCLENBQUM7SUFDeEMsTUFBTSxPQUFPLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUV0QyxJQUFJLE9BQU8sSUFBSSxPQUFPLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtRQUMvQixPQUFPLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztLQUNyQjtJQUVELE9BQU8sSUFBSSxDQUFDO0FBQ2hCLENBQUMifQ==