"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var tslib=require("tslib"),coreClient=require("@azure/core-client"),coreRestPipeline=require("@azure/core-rest-pipeline");function _interopNamespace(i){var r;return i&&i.__esModule?i:(r=Object.create(null),i&&Object.keys(i).forEach(function(e){var t;"default"!==e&&(t=Object.getOwnPropertyDescriptor(i,e),Object.defineProperty(r,e,t.get?t:{enumerable:!0,get:function(){return i[e]}}))}),r.default=i,Object.freeze(r))}var coreClient__namespace=_interopNamespace(coreClient),coreRestPipeline__namespace=_interopNamespace(coreRestPipeline);const pageMap=new WeakMap;function getContinuationToken(e){return"object"!=typeof e||null===e||null==(e=pageMap.get(e))?void 0:e.continuationToken}function setContinuationToken(e,t){var i;"object"==typeof e&&null!==e&&t&&((i=null!=(i=pageMap.get(e))?i:{}).continuationToken=t,pageMap.set(e,i))}exports.KnownChangeType=void 0,function(e){e.Add="Add",e.Remove="Remove",e.Update="Update"}(exports.KnownChangeType||(exports.KnownChangeType={})),exports.KnownLevel=void 0,function(e){e.Noisy="Noisy",e.Normal="Normal",e.Important="Important"}(exports.KnownLevel||(exports.KnownLevel={}));const ResourceProviderOperationList={type:{name:"Composite",className:"ResourceProviderOperationList",modelProperties:{value:{serializedName:"value",type:{name:"Sequence",element:{type:{name:"Composite",className:"ResourceProviderOperationDefinition"}}}},nextLink:{serializedName:"nextLink",type:{name:"String"}}}}},ResourceProviderOperationDefinition={type:{name:"Composite",className:"ResourceProviderOperationDefinition",modelProperties:{name:{serializedName:"name",type:{name:"String"}},display:{serializedName:"display",type:{name:"Composite",className:"ResourceProviderOperationDisplay"}}}}},ResourceProviderOperationDisplay={type:{name:"Composite",className:"ResourceProviderOperationDisplay",modelProperties:{provider:{serializedName:"provider",type:{name:"String"}},resource:{serializedName:"resource",type:{name:"String"}},operation:{serializedName:"operation",type:{name:"String"}},description:{serializedName:"description",type:{name:"String"}}}}},ErrorResponse={type:{name:"Composite",className:"ErrorResponse",modelProperties:{error:{serializedName:"error",type:{name:"Composite",className:"ErrorDetail"}}}}},ErrorDetail={type:{name:"Composite",className:"ErrorDetail",modelProperties:{code:{serializedName:"code",readOnly:!0,type:{name:"String"}},message:{serializedName:"message",readOnly:!0,type:{name:"String"}},target:{serializedName:"target",readOnly:!0,type:{name:"String"}},details:{serializedName:"details",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ErrorDetail"}}}},additionalInfo:{serializedName:"additionalInfo",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ErrorAdditionalInfo"}}}}}}},ErrorAdditionalInfo={type:{name:"Composite",className:"ErrorAdditionalInfo",modelProperties:{type:{serializedName:"type",readOnly:!0,type:{name:"String"}},info:{serializedName:"info",readOnly:!0,type:{name:"Dictionary",value:{type:{name:"any"}}}}}}},ChangeList={type:{name:"Composite",className:"ChangeList",modelProperties:{value:{serializedName:"value",type:{name:"Sequence",element:{type:{name:"Composite",className:"Change"}}}},nextLink:{serializedName:"nextLink",type:{name:"String"}}}}},ChangeProperties={type:{name:"Composite",className:"ChangeProperties",modelProperties:{resourceId:{serializedName:"resourceId",type:{name:"String"}},timeStamp:{serializedName:"timeStamp",type:{name:"DateTime"}},initiatedByList:{serializedName:"initiatedByList",type:{name:"Sequence",element:{type:{name:"String"}}}},changeType:{serializedName:"changeType",type:{name:"String"}},propertyChanges:{serializedName:"propertyChanges",type:{name:"Sequence",element:{type:{name:"Composite",className:"PropertyChange"}}}}}}},PropertyChange={type:{name:"Composite",className:"PropertyChange",modelProperties:{changeType:{serializedName:"changeType",type:{name:"String"}},changeCategory:{serializedName:"changeCategory",type:{name:"Enum",allowedValues:["User","System"]}},jsonPath:{serializedName:"jsonPath",type:{name:"String"}},displayName:{serializedName:"displayName",type:{name:"String"}},level:{serializedName:"level",type:{name:"String"}},description:{serializedName:"description",type:{name:"String"}},oldValue:{serializedName:"oldValue",type:{name:"String"}},newValue:{serializedName:"newValue",type:{name:"String"}},isDataMasked:{serializedName:"isDataMasked",type:{name:"Boolean"}}}}},Resource={type:{name:"Composite",className:"Resource",modelProperties:{id:{serializedName:"id",readOnly:!0,type:{name:"String"}},name:{serializedName:"name",readOnly:!0,type:{name:"String"}},type:{serializedName:"type",readOnly:!0,type:{name:"String"}}}}},ProxyResource={type:{name:"Composite",className:"ProxyResource",modelProperties:Object.assign({},Resource.type.modelProperties)}},Change={type:{name:"Composite",className:"Change",modelProperties:Object.assign(Object.assign({},ProxyResource.type.modelProperties),{properties:{serializedName:"properties",type:{name:"Composite",className:"ChangeProperties"}}})}};var Mappers=Object.freeze({__proto__:null,ResourceProviderOperationList:ResourceProviderOperationList,ResourceProviderOperationDefinition:ResourceProviderOperationDefinition,ResourceProviderOperationDisplay:ResourceProviderOperationDisplay,ErrorResponse:ErrorResponse,ErrorDetail:ErrorDetail,ErrorAdditionalInfo:ErrorAdditionalInfo,ChangeList:ChangeList,ChangeProperties:ChangeProperties,PropertyChange:PropertyChange,Resource:Resource,ProxyResource:ProxyResource,Change:Change});const accept={parameterPath:"accept",mapper:{defaultValue:"application/json",isConstant:!0,serializedName:"Accept",type:{name:"String"}}},$host={parameterPath:"$host",mapper:{serializedName:"$host",required:!0,type:{name:"String"}},skipEncoding:!0},apiVersion={parameterPath:"apiVersion",mapper:{defaultValue:"2021-04-01",isConstant:!0,serializedName:"api-version",type:{name:"String"}}},skipToken={parameterPath:["options","skipToken"],mapper:{serializedName:"$skipToken",type:{name:"String"}}},nextLink={parameterPath:"nextLink",mapper:{serializedName:"nextLink",required:!0,type:{name:"String"}},skipEncoding:!0},resourceId={parameterPath:"resourceId",mapper:{serializedName:"resourceId",required:!0,type:{name:"String"}}},startTime={parameterPath:"startTime",mapper:{serializedName:"$startTime",required:!0,type:{name:"DateTime"}}},endTime={parameterPath:"endTime",mapper:{serializedName:"$endTime",required:!0,type:{name:"DateTime"}}},subscriptionId={parameterPath:"subscriptionId",mapper:{constraints:{MinLength:1},serializedName:"subscriptionId",required:!0,type:{name:"String"}}},resourceGroupName={parameterPath:"resourceGroupName",mapper:{constraints:{MaxLength:90,MinLength:1},serializedName:"resourceGroupName",required:!0,type:{name:"String"}}};class OperationsImpl{constructor(e){this.client=e}list(t){const e=this.listPagingAll(t);return{next(){return e.next()},[Symbol.asyncIterator](){return this},byPage:e=>{if(null!=e&&e.maxPageSize)throw new Error("maxPageSize is not supported by this operation.");return this.listPagingPage(t,e)}}}listPagingPage(a,n){return tslib.__asyncGenerator(this,arguments,function*(){let e,t=null==n?void 0:n.continuationToken;var i;for(t||(setContinuationToken(i=(e=yield tslib.__await(this._list(a))).value||[],t=e.nextLink),yield yield tslib.__await(i));t;){e=yield tslib.__await(this._listNext(t,a)),t=e.nextLink;var r=e.value||[];setContinuationToken(r,t),yield yield tslib.__await(r)}})}listPagingAll(n){return tslib.__asyncGenerator(this,arguments,function*(){var t,e;try{for(var i,r=tslib.__asyncValues(this.listPagingPage(n));!(i=yield tslib.__await(r.next())).done;){var a=i.value;yield tslib.__await(yield*tslib.__asyncDelegator(tslib.__asyncValues(a)))}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=r.return)&&(yield tslib.__await(e.call(r)))}finally{if(t)throw t.error}}})}_list(e){return this.client.sendOperationRequest({options:e},listOperationSpec$1)}_listNext(e,t){return this.client.sendOperationRequest({nextLink:e,options:t},listNextOperationSpec$1)}}const serializer$2=coreClient__namespace.createSerializer(Mappers,!1),listOperationSpec$1={path:"/providers/Microsoft.ChangeAnalysis/operations",httpMethod:"GET",responses:{200:{bodyMapper:ResourceProviderOperationList},default:{bodyMapper:ErrorResponse}},queryParameters:[apiVersion,skipToken],urlParameters:[$host],headerParameters:[accept],serializer:serializer$2},listNextOperationSpec$1={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:ResourceProviderOperationList},default:{bodyMapper:ErrorResponse}},queryParameters:[apiVersion,skipToken],urlParameters:[$host,nextLink],headerParameters:[accept],serializer:serializer$2};class ResourceChangesImpl{constructor(e){this.client=e}list(t,i,r,a){const e=this.listPagingAll(t,i,r,a);return{next(){return e.next()},[Symbol.asyncIterator](){return this},byPage:e=>{if(null!=e&&e.maxPageSize)throw new Error("maxPageSize is not supported by this operation.");return this.listPagingPage(t,i,r,a,e)}}}listPagingPage(a,n,s,o,l){return tslib.__asyncGenerator(this,arguments,function*(){let e,t=null==l?void 0:l.continuationToken;var i;for(t||(setContinuationToken(i=(e=yield tslib.__await(this._list(a,n,s,o))).value||[],t=e.nextLink),yield yield tslib.__await(i));t;){e=yield tslib.__await(this._listNext(a,n,s,t,o)),t=e.nextLink;var r=e.value||[];setContinuationToken(r,t),yield yield tslib.__await(r)}})}listPagingAll(n,s,o,l){return tslib.__asyncGenerator(this,arguments,function*(){var t,e;try{for(var i,r=tslib.__asyncValues(this.listPagingPage(n,s,o,l));!(i=yield tslib.__await(r.next())).done;){var a=i.value;yield tslib.__await(yield*tslib.__asyncDelegator(tslib.__asyncValues(a)))}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=r.return)&&(yield tslib.__await(e.call(r)))}finally{if(t)throw t.error}}})}_list(e,t,i,r){return this.client.sendOperationRequest({resourceId:e,startTime:t,endTime:i,options:r},listOperationSpec)}_listNext(e,t,i,r,a){return this.client.sendOperationRequest({resourceId:e,startTime:t,endTime:i,nextLink:r,options:a},listNextOperationSpec)}}const serializer$1=coreClient__namespace.createSerializer(Mappers,!1),listOperationSpec={path:"/{resourceId}/providers/Microsoft.ChangeAnalysis/resourceChanges",httpMethod:"POST",responses:{200:{bodyMapper:ChangeList},default:{bodyMapper:ErrorResponse}},queryParameters:[apiVersion,skipToken,startTime,endTime],urlParameters:[$host,resourceId],headerParameters:[accept],serializer:serializer$1},listNextOperationSpec={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:ChangeList},default:{bodyMapper:ErrorResponse}},queryParameters:[apiVersion,skipToken,startTime,endTime],urlParameters:[$host,nextLink,resourceId],headerParameters:[accept],serializer:serializer$1};class ChangesImpl{constructor(e){this.client=e}listChangesByResourceGroup(t,i,r,a){const e=this.listChangesByResourceGroupPagingAll(t,i,r,a);return{next(){return e.next()},[Symbol.asyncIterator](){return this},byPage:e=>{if(null!=e&&e.maxPageSize)throw new Error("maxPageSize is not supported by this operation.");return this.listChangesByResourceGroupPagingPage(t,i,r,a,e)}}}listChangesByResourceGroupPagingPage(a,n,s,o,l){return tslib.__asyncGenerator(this,arguments,function*(){let e,t=null==l?void 0:l.continuationToken;var i;for(t||(setContinuationToken(i=(e=yield tslib.__await(this._listChangesByResourceGroup(a,n,s,o))).value||[],t=e.nextLink),yield yield tslib.__await(i));t;){e=yield tslib.__await(this._listChangesByResourceGroupNext(a,n,s,t,o)),t=e.nextLink;var r=e.value||[];setContinuationToken(r,t),yield yield tslib.__await(r)}})}listChangesByResourceGroupPagingAll(n,s,o,l){return tslib.__asyncGenerator(this,arguments,function*(){var t,e;try{for(var i,r=tslib.__asyncValues(this.listChangesByResourceGroupPagingPage(n,s,o,l));!(i=yield tslib.__await(r.next())).done;){var a=i.value;yield tslib.__await(yield*tslib.__asyncDelegator(tslib.__asyncValues(a)))}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=r.return)&&(yield tslib.__await(e.call(r)))}finally{if(t)throw t.error}}})}listChangesBySubscription(t,i,r){const e=this.listChangesBySubscriptionPagingAll(t,i,r);return{next(){return e.next()},[Symbol.asyncIterator](){return this},byPage:e=>{if(null!=e&&e.maxPageSize)throw new Error("maxPageSize is not supported by this operation.");return this.listChangesBySubscriptionPagingPage(t,i,r,e)}}}listChangesBySubscriptionPagingPage(a,n,s,o){return tslib.__asyncGenerator(this,arguments,function*(){let e,t=null==o?void 0:o.continuationToken;var i;for(t||(setContinuationToken(i=(e=yield tslib.__await(this._listChangesBySubscription(a,n,s))).value||[],t=e.nextLink),yield yield tslib.__await(i));t;){e=yield tslib.__await(this._listChangesBySubscriptionNext(a,n,t,s)),t=e.nextLink;var r=e.value||[];setContinuationToken(r,t),yield yield tslib.__await(r)}})}listChangesBySubscriptionPagingAll(n,s,o){return tslib.__asyncGenerator(this,arguments,function*(){var t,e;try{for(var i,r=tslib.__asyncValues(this.listChangesBySubscriptionPagingPage(n,s,o));!(i=yield tslib.__await(r.next())).done;){var a=i.value;yield tslib.__await(yield*tslib.__asyncDelegator(tslib.__asyncValues(a)))}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=r.return)&&(yield tslib.__await(e.call(r)))}finally{if(t)throw t.error}}})}_listChangesByResourceGroup(e,t,i,r){return this.client.sendOperationRequest({resourceGroupName:e,startTime:t,endTime:i,options:r},listChangesByResourceGroupOperationSpec)}_listChangesBySubscription(e,t,i){return this.client.sendOperationRequest({startTime:e,endTime:t,options:i},listChangesBySubscriptionOperationSpec)}_listChangesByResourceGroupNext(e,t,i,r,a){return this.client.sendOperationRequest({resourceGroupName:e,startTime:t,endTime:i,nextLink:r,options:a},listChangesByResourceGroupNextOperationSpec)}_listChangesBySubscriptionNext(e,t,i,r){return this.client.sendOperationRequest({startTime:e,endTime:t,nextLink:i,options:r},listChangesBySubscriptionNextOperationSpec)}}const serializer=coreClient__namespace.createSerializer(Mappers,!1),listChangesByResourceGroupOperationSpec={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.ChangeAnalysis/changes",httpMethod:"GET",responses:{200:{bodyMapper:ChangeList},default:{bodyMapper:ErrorResponse}},queryParameters:[apiVersion,skipToken,startTime,endTime],urlParameters:[$host,subscriptionId,resourceGroupName],headerParameters:[accept],serializer:serializer},listChangesBySubscriptionOperationSpec={path:"/subscriptions/{subscriptionId}/providers/Microsoft.ChangeAnalysis/changes",httpMethod:"GET",responses:{200:{bodyMapper:ChangeList},default:{bodyMapper:ErrorResponse}},queryParameters:[apiVersion,skipToken,startTime,endTime],urlParameters:[$host,subscriptionId],headerParameters:[accept],serializer:serializer},listChangesByResourceGroupNextOperationSpec={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:ChangeList},default:{bodyMapper:ErrorResponse}},queryParameters:[apiVersion,skipToken,startTime,endTime],urlParameters:[$host,nextLink,subscriptionId,resourceGroupName],headerParameters:[accept],serializer:serializer},listChangesBySubscriptionNextOperationSpec={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:ChangeList},default:{bodyMapper:ErrorResponse}},queryParameters:[apiVersion,skipToken,startTime,endTime],urlParameters:[$host,nextLink,subscriptionId],headerParameters:[accept],serializer:serializer};class AzureChangeAnalysisManagementClient extends coreClient__namespace.ServiceClient{constructor(e,t,i){if(void 0===e)throw new Error("'credentials' cannot be null");if(void 0===t)throw new Error("'subscriptionId' cannot be null");var r,a="azsdk-js-arm-changeanalysis/2.1.0",a=(i=i||{}).userAgentOptions&&i.userAgentOptions.userAgentPrefix?i.userAgentOptions.userAgentPrefix+" "+a:a,a=Object.assign(Object.assign(Object.assign({},{requestContentType:"application/json; charset=utf-8",credential:e}),i),{userAgentOptions:{userAgentPrefix:a},endpoint:null!=(a=null!=(a=i.endpoint)?a:i.baseUri)?a:"https://management.azure.com"});super(a);let n=!1;null!=i&&i.pipeline&&0<i.pipeline.getOrderedPolicies().length&&(r=i.pipeline.getOrderedPolicies(),n=r.some(e=>e.name===coreRestPipeline__namespace.bearerTokenAuthenticationPolicyName)),i&&i.pipeline&&0!=i.pipeline.getOrderedPolicies().length&&n||(this.pipeline.removePolicy({name:coreRestPipeline__namespace.bearerTokenAuthenticationPolicyName}),this.pipeline.addPolicy(coreRestPipeline__namespace.bearerTokenAuthenticationPolicy({credential:e,scopes:null!=(r=a.credentialScopes)?r:a.endpoint+"/.default",challengeCallbacks:{authorizeRequestOnChallenge:coreClient__namespace.authorizeRequestOnClaimChallenge}}))),this.subscriptionId=t,this.$host=i.$host||"https://management.azure.com",this.apiVersion=i.apiVersion||"2021-04-01",this.operations=new OperationsImpl(this),this.resourceChanges=new ResourceChangesImpl(this),this.changes=new ChangesImpl(this),this.addCustomApiVersionPolicy(i.apiVersion)}addCustomApiVersionPolicy(a){a&&this.pipeline.addPolicy({name:"CustomApiVersionPolicy",sendRequest(i,r){return tslib.__awaiter(this,void 0,void 0,function*(){var e,t=i.url.split("?");return 1<t.length&&(e=t[1].split("&").map(e=>-1<e.indexOf("api-version")?"api-version="+a:e),i.url=t[0]+"?"+e.join("&")),r(i)})}})}}exports.AzureChangeAnalysisManagementClient=AzureChangeAnalysisManagementClient,exports.getContinuationToken=getContinuationToken;