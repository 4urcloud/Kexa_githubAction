"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var tslib=require("tslib"),coreClient=require("@azure/core-client"),coreRestPipeline=require("@azure/core-rest-pipeline"),coreLro=require("@azure/core-lro");function _interopNamespaceDefault(t){var r=Object.create(null);return t&&Object.keys(t).forEach(function(e){var a;"default"!==e&&(a=Object.getOwnPropertyDescriptor(t,e),Object.defineProperty(r,e,a.get?a:{enumerable:!0,get:function(){return t[e]}}))}),r.default=t,Object.freeze(r)}var coreClient__namespace=_interopNamespaceDefault(coreClient),coreRestPipeline__namespace=_interopNamespaceDefault(coreRestPipeline);const pageMap=new WeakMap;function getContinuationToken(e){return"object"!=typeof e||null===e||null==(e=pageMap.get(e))?void 0:e.continuationToken}function setContinuationToken(e,a){var t;"object"==typeof e&&null!==e&&a&&((t=null!=(t=pageMap.get(e))?t:{}).continuationToken=a,pageMap.set(e,t))}exports.KnownOnBuildError=void 0,function(e){e.Cleanup="cleanup",e.Abort="abort"}(exports.KnownOnBuildError||(exports.KnownOnBuildError={})),exports.KnownProvisioningErrorCode=void 0,function(e){e.BadSourceType="BadSourceType",e.BadPIRSource="BadPIRSource",e.BadManagedImageSource="BadManagedImageSource",e.BadSharedImageVersionSource="BadSharedImageVersionSource",e.BadCustomizerType="BadCustomizerType",e.UnsupportedCustomizerType="UnsupportedCustomizerType",e.NoCustomizerScript="NoCustomizerScript",e.BadValidatorType="BadValidatorType",e.UnsupportedValidatorType="UnsupportedValidatorType",e.NoValidatorScript="NoValidatorScript",e.BadDistributeType="BadDistributeType",e.BadSharedImageDistribute="BadSharedImageDistribute",e.BadStagingResourceGroup="BadStagingResourceGroup",e.ServerError="ServerError",e.Other="Other"}(exports.KnownProvisioningErrorCode||(exports.KnownProvisioningErrorCode={})),exports.KnownCreatedByType=void 0,function(e){e.User="User",e.Application="Application",e.ManagedIdentity="ManagedIdentity",e.Key="Key"}(exports.KnownCreatedByType||(exports.KnownCreatedByType={})),exports.KnownSharedImageStorageAccountType=void 0,function(e){e.StandardLRS="Standard_LRS",e.StandardZRS="Standard_ZRS",e.PremiumLRS="Premium_LRS"}(exports.KnownSharedImageStorageAccountType||(exports.KnownSharedImageStorageAccountType={}));const ImageTemplateListResult={type:{name:"Composite",className:"ImageTemplateListResult",modelProperties:{value:{serializedName:"value",type:{name:"Sequence",element:{type:{name:"Composite",className:"ImageTemplate"}}}},nextLink:{serializedName:"nextLink",type:{name:"String"}}}}},ImageTemplateSource={type:{name:"Composite",className:"ImageTemplateSource",uberParent:"ImageTemplateSource",polymorphicDiscriminator:{serializedName:"type",clientName:"type"},modelProperties:{type:{serializedName:"type",required:!0,type:{name:"String"}}}}},ImageTemplateCustomizer={type:{name:"Composite",className:"ImageTemplateCustomizer",uberParent:"ImageTemplateCustomizer",polymorphicDiscriminator:{serializedName:"type",clientName:"type"},modelProperties:{type:{serializedName:"type",required:!0,type:{name:"String"}},name:{serializedName:"name",type:{name:"String"}}}}},ImageTemplatePropertiesOptimize={type:{name:"Composite",className:"ImageTemplatePropertiesOptimize",modelProperties:{vmBoot:{serializedName:"vmBoot",type:{name:"Composite",className:"ImageTemplatePropertiesOptimizeVmBoot"}}}}},ImageTemplatePropertiesOptimizeVmBoot={type:{name:"Composite",className:"ImageTemplatePropertiesOptimizeVmBoot",modelProperties:{state:{serializedName:"state",type:{name:"Enum",allowedValues:["Enabled","Disabled"]}}}}},ImageTemplatePropertiesValidate={type:{name:"Composite",className:"ImageTemplatePropertiesValidate",modelProperties:{continueDistributeOnFailure:{defaultValue:!1,serializedName:"continueDistributeOnFailure",type:{name:"Boolean"}},sourceValidationOnly:{defaultValue:!1,serializedName:"sourceValidationOnly",type:{name:"Boolean"}},inVMValidations:{serializedName:"inVMValidations",type:{name:"Sequence",element:{type:{name:"Composite",className:"ImageTemplateInVMValidator"}}}}}}},ImageTemplateInVMValidator={type:{name:"Composite",className:"ImageTemplateInVMValidator",uberParent:"ImageTemplateInVMValidator",polymorphicDiscriminator:{serializedName:"type",clientName:"type"},modelProperties:{type:{serializedName:"type",required:!0,type:{name:"String"}},name:{serializedName:"name",type:{name:"String"}}}}},ImageTemplateDistributor={type:{name:"Composite",className:"ImageTemplateDistributor",uberParent:"ImageTemplateDistributor",polymorphicDiscriminator:{serializedName:"type",clientName:"type"},modelProperties:{type:{serializedName:"type",required:!0,type:{name:"String"}},runOutputName:{constraints:{Pattern:new RegExp("^[A-Za-z0-9-_.]{1,64}$")},serializedName:"runOutputName",required:!0,type:{name:"String"}},artifactTags:{serializedName:"artifactTags",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},ImageTemplatePropertiesErrorHandling={type:{name:"Composite",className:"ImageTemplatePropertiesErrorHandling",modelProperties:{onCustomizerError:{serializedName:"onCustomizerError",type:{name:"String"}},onValidationError:{serializedName:"onValidationError",type:{name:"String"}}}}},ProvisioningError={type:{name:"Composite",className:"ProvisioningError",modelProperties:{provisioningErrorCode:{serializedName:"provisioningErrorCode",type:{name:"String"}},message:{serializedName:"message",type:{name:"String"}}}}},ImageTemplateLastRunStatus={type:{name:"Composite",className:"ImageTemplateLastRunStatus",modelProperties:{startTime:{serializedName:"startTime",type:{name:"DateTime"}},endTime:{serializedName:"endTime",type:{name:"DateTime"}},runState:{serializedName:"runState",type:{name:"Enum",allowedValues:["Running","Canceling","Succeeded","PartiallySucceeded","Failed","Canceled"]}},runSubState:{serializedName:"runSubState",type:{name:"Enum",allowedValues:["Queued","Building","Customizing","Optimizing","Validating","Distributing"]}},message:{serializedName:"message",type:{name:"String"}}}}},ImageTemplateVmProfile={type:{name:"Composite",className:"ImageTemplateVmProfile",modelProperties:{vmSize:{defaultValue:"",serializedName:"vmSize",type:{name:"String"}},osDiskSizeGB:{defaultValue:0,constraints:{InclusiveMinimum:0},serializedName:"osDiskSizeGB",type:{name:"Number"}},userAssignedIdentities:{serializedName:"userAssignedIdentities",type:{name:"Sequence",element:{type:{name:"String"}}}},vnetConfig:{serializedName:"vnetConfig",type:{name:"Composite",className:"VirtualNetworkConfig"}}}}},VirtualNetworkConfig={type:{name:"Composite",className:"VirtualNetworkConfig",modelProperties:{subnetId:{serializedName:"subnetId",type:{name:"String"}},proxyVmSize:{defaultValue:"",serializedName:"proxyVmSize",type:{name:"String"}}}}},ImageTemplateIdentity={type:{name:"Composite",className:"ImageTemplateIdentity",modelProperties:{type:{serializedName:"type",type:{name:"Enum",allowedValues:["UserAssigned","None"]}},userAssignedIdentities:{serializedName:"userAssignedIdentities",type:{name:"Dictionary",value:{type:{name:"Composite",className:"UserAssignedIdentity"}}}}}}},UserAssignedIdentity={type:{name:"Composite",className:"UserAssignedIdentity",modelProperties:{principalId:{serializedName:"principalId",readOnly:!0,type:{name:"String"}},clientId:{serializedName:"clientId",readOnly:!0,type:{name:"String"}}}}},Resource={type:{name:"Composite",className:"Resource",modelProperties:{id:{serializedName:"id",readOnly:!0,type:{name:"String"}},name:{serializedName:"name",readOnly:!0,type:{name:"String"}},type:{serializedName:"type",readOnly:!0,type:{name:"String"}},systemData:{serializedName:"systemData",type:{name:"Composite",className:"SystemData"}}}}},SystemData={type:{name:"Composite",className:"SystemData",modelProperties:{createdBy:{serializedName:"createdBy",type:{name:"String"}},createdByType:{serializedName:"createdByType",type:{name:"String"}},createdAt:{serializedName:"createdAt",type:{name:"DateTime"}},lastModifiedBy:{serializedName:"lastModifiedBy",type:{name:"String"}},lastModifiedByType:{serializedName:"lastModifiedByType",type:{name:"String"}},lastModifiedAt:{serializedName:"lastModifiedAt",type:{name:"DateTime"}}}}},ErrorResponse={type:{name:"Composite",className:"ErrorResponse",modelProperties:{error:{serializedName:"error",type:{name:"Composite",className:"ErrorDetail"}}}}},ErrorDetail={type:{name:"Composite",className:"ErrorDetail",modelProperties:{code:{serializedName:"code",readOnly:!0,type:{name:"String"}},message:{serializedName:"message",readOnly:!0,type:{name:"String"}},target:{serializedName:"target",readOnly:!0,type:{name:"String"}},details:{serializedName:"details",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ErrorDetail"}}}},additionalInfo:{serializedName:"additionalInfo",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ErrorAdditionalInfo"}}}}}}},ErrorAdditionalInfo={type:{name:"Composite",className:"ErrorAdditionalInfo",modelProperties:{type:{serializedName:"type",readOnly:!0,type:{name:"String"}},info:{serializedName:"info",readOnly:!0,type:{name:"Dictionary",value:{type:{name:"any"}}}}}}},ImageTemplateUpdateParameters={type:{name:"Composite",className:"ImageTemplateUpdateParameters",modelProperties:{identity:{serializedName:"identity",type:{name:"Composite",className:"ImageTemplateIdentity"}},tags:{serializedName:"tags",type:{name:"Dictionary",value:{type:{name:"String"}}}},properties:{serializedName:"properties",type:{name:"Composite",className:"ImageTemplateUpdateParametersProperties"}}}}},ImageTemplateUpdateParametersProperties={type:{name:"Composite",className:"ImageTemplateUpdateParametersProperties",modelProperties:{distribute:{serializedName:"distribute",type:{name:"Sequence",element:{type:{name:"Composite",className:"ImageTemplateDistributor"}}}}}}},RunOutputCollection={type:{name:"Composite",className:"RunOutputCollection",modelProperties:{value:{serializedName:"value",type:{name:"Sequence",element:{type:{name:"Composite",className:"RunOutput"}}}},nextLink:{serializedName:"nextLink",type:{name:"String"}}}}},TriggerCollection={type:{name:"Composite",className:"TriggerCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"Trigger"}}}},nextLink:{serializedName:"nextLink",type:{name:"String"}}}}},TriggerProperties={type:{name:"Composite",className:"TriggerProperties",uberParent:"TriggerProperties",polymorphicDiscriminator:{serializedName:"kind",clientName:"kind"},modelProperties:{kind:{serializedName:"kind",required:!0,type:{name:"String"}},status:{serializedName:"status",type:{name:"Composite",className:"TriggerStatus"}},provisioningState:{serializedName:"provisioningState",readOnly:!0,type:{name:"Enum",allowedValues:["Creating","Updating","Succeeded","Failed","Deleting","Canceled"]}}}}},TriggerStatus={type:{name:"Composite",className:"TriggerStatus",modelProperties:{code:{serializedName:"code",readOnly:!0,type:{name:"String"}},message:{serializedName:"message",readOnly:!0,type:{name:"String"}},time:{serializedName:"time",readOnly:!0,type:{name:"DateTime"}}}}},OperationListResult={type:{name:"Composite",className:"OperationListResult",modelProperties:{value:{serializedName:"value",type:{name:"Sequence",element:{type:{name:"Composite",className:"Operation"}}}},nextLink:{serializedName:"nextLink",type:{name:"String"}}}}},Operation={type:{name:"Composite",className:"Operation",modelProperties:{name:{serializedName:"name",type:{name:"String"}},display:{serializedName:"display",type:{name:"Composite",className:"OperationDisplay"}},origin:{serializedName:"origin",type:{name:"String"}},properties:{serializedName:"properties",type:{name:"Dictionary",value:{type:{name:"any"}}}},isDataAction:{serializedName:"isDataAction",type:{name:"Boolean"}}}}},OperationDisplay={type:{name:"Composite",className:"OperationDisplay",modelProperties:{provider:{serializedName:"provider",type:{name:"String"}},operation:{serializedName:"operation",type:{name:"String"}},resource:{serializedName:"resource",type:{name:"String"}},description:{serializedName:"description",type:{name:"String"}}}}},PlatformImagePurchasePlan={type:{name:"Composite",className:"PlatformImagePurchasePlan",modelProperties:{planName:{serializedName:"planName",required:!0,type:{name:"String"}},planProduct:{serializedName:"planProduct",required:!0,type:{name:"String"}},planPublisher:{serializedName:"planPublisher",required:!0,type:{name:"String"}}}}},TargetRegion={type:{name:"Composite",className:"TargetRegion",modelProperties:{name:{serializedName:"name",required:!0,type:{name:"String"}},replicaCount:{defaultValue:1,constraints:{InclusiveMinimum:1},serializedName:"replicaCount",type:{name:"Number"}},storageAccountType:{serializedName:"storageAccountType",type:{name:"String"}}}}},DistributeVersioner={type:{name:"Composite",className:"DistributeVersioner",uberParent:"DistributeVersioner",polymorphicDiscriminator:{serializedName:"scheme",clientName:"scheme"},modelProperties:{scheme:{serializedName:"scheme",required:!0,type:{name:"String"}}}}},ImageTemplatePlatformImageSource={serializedName:"PlatformImage",type:{name:"Composite",className:"ImageTemplatePlatformImageSource",uberParent:"ImageTemplateSource",polymorphicDiscriminator:ImageTemplateSource.type.polymorphicDiscriminator,modelProperties:Object.assign(Object.assign({},ImageTemplateSource.type.modelProperties),{publisher:{serializedName:"publisher",type:{name:"String"}},offer:{serializedName:"offer",type:{name:"String"}},sku:{serializedName:"sku",type:{name:"String"}},version:{serializedName:"version",type:{name:"String"}},exactVersion:{serializedName:"exactVersion",readOnly:!0,type:{name:"String"}},planInfo:{serializedName:"planInfo",type:{name:"Composite",className:"PlatformImagePurchasePlan"}}})}},ImageTemplateManagedImageSource={serializedName:"ManagedImage",type:{name:"Composite",className:"ImageTemplateManagedImageSource",uberParent:"ImageTemplateSource",polymorphicDiscriminator:ImageTemplateSource.type.polymorphicDiscriminator,modelProperties:Object.assign(Object.assign({},ImageTemplateSource.type.modelProperties),{imageId:{serializedName:"imageId",required:!0,type:{name:"String"}}})}},ImageTemplateSharedImageVersionSource={serializedName:"SharedImageVersion",type:{name:"Composite",className:"ImageTemplateSharedImageVersionSource",uberParent:"ImageTemplateSource",polymorphicDiscriminator:ImageTemplateSource.type.polymorphicDiscriminator,modelProperties:Object.assign(Object.assign({},ImageTemplateSource.type.modelProperties),{imageVersionId:{serializedName:"imageVersionId",required:!0,type:{name:"String"}},exactVersion:{serializedName:"exactVersion",readOnly:!0,type:{name:"String"}}})}},ImageTemplateShellCustomizer={serializedName:"Shell",type:{name:"Composite",className:"ImageTemplateShellCustomizer",uberParent:"ImageTemplateCustomizer",polymorphicDiscriminator:ImageTemplateCustomizer.type.polymorphicDiscriminator,modelProperties:Object.assign(Object.assign({},ImageTemplateCustomizer.type.modelProperties),{scriptUri:{serializedName:"scriptUri",type:{name:"String"}},sha256Checksum:{defaultValue:"",serializedName:"sha256Checksum",type:{name:"String"}},inline:{serializedName:"inline",type:{name:"Sequence",element:{type:{name:"String"}}}}})}},ImageTemplateRestartCustomizer={serializedName:"WindowsRestart",type:{name:"Composite",className:"ImageTemplateRestartCustomizer",uberParent:"ImageTemplateCustomizer",polymorphicDiscriminator:ImageTemplateCustomizer.type.polymorphicDiscriminator,modelProperties:Object.assign(Object.assign({},ImageTemplateCustomizer.type.modelProperties),{restartCommand:{serializedName:"restartCommand",type:{name:"String"}},restartCheckCommand:{serializedName:"restartCheckCommand",type:{name:"String"}},restartTimeout:{serializedName:"restartTimeout",type:{name:"String"}}})}},ImageTemplateWindowsUpdateCustomizer={serializedName:"WindowsUpdate",type:{name:"Composite",className:"ImageTemplateWindowsUpdateCustomizer",uberParent:"ImageTemplateCustomizer",polymorphicDiscriminator:ImageTemplateCustomizer.type.polymorphicDiscriminator,modelProperties:Object.assign(Object.assign({},ImageTemplateCustomizer.type.modelProperties),{searchCriteria:{serializedName:"searchCriteria",type:{name:"String"}},filters:{serializedName:"filters",type:{name:"Sequence",element:{type:{name:"String"}}}},updateLimit:{defaultValue:0,constraints:{InclusiveMinimum:0},serializedName:"updateLimit",type:{name:"Number"}}})}},ImageTemplatePowerShellCustomizer={serializedName:"PowerShell",type:{name:"Composite",className:"ImageTemplatePowerShellCustomizer",uberParent:"ImageTemplateCustomizer",polymorphicDiscriminator:ImageTemplateCustomizer.type.polymorphicDiscriminator,modelProperties:Object.assign(Object.assign({},ImageTemplateCustomizer.type.modelProperties),{scriptUri:{serializedName:"scriptUri",type:{name:"String"}},sha256Checksum:{defaultValue:"",serializedName:"sha256Checksum",type:{name:"String"}},inline:{serializedName:"inline",type:{name:"Sequence",element:{type:{name:"String"}}}},runElevated:{defaultValue:!1,serializedName:"runElevated",type:{name:"Boolean"}},runAsSystem:{defaultValue:!1,serializedName:"runAsSystem",type:{name:"Boolean"}},validExitCodes:{serializedName:"validExitCodes",type:{name:"Sequence",element:{type:{name:"Number"}}}}})}},ImageTemplateFileCustomizer={serializedName:"File",type:{name:"Composite",className:"ImageTemplateFileCustomizer",uberParent:"ImageTemplateCustomizer",polymorphicDiscriminator:ImageTemplateCustomizer.type.polymorphicDiscriminator,modelProperties:Object.assign(Object.assign({},ImageTemplateCustomizer.type.modelProperties),{sourceUri:{serializedName:"sourceUri",type:{name:"String"}},sha256Checksum:{defaultValue:"",serializedName:"sha256Checksum",type:{name:"String"}},destination:{serializedName:"destination",type:{name:"String"}}})}},ImageTemplateShellValidator={serializedName:"Shell",type:{name:"Composite",className:"ImageTemplateShellValidator",uberParent:"ImageTemplateInVMValidator",polymorphicDiscriminator:ImageTemplateInVMValidator.type.polymorphicDiscriminator,modelProperties:Object.assign(Object.assign({},ImageTemplateInVMValidator.type.modelProperties),{scriptUri:{serializedName:"scriptUri",type:{name:"String"}},sha256Checksum:{defaultValue:"",serializedName:"sha256Checksum",type:{name:"String"}},inline:{serializedName:"inline",type:{name:"Sequence",element:{type:{name:"String"}}}}})}},ImageTemplatePowerShellValidator={serializedName:"PowerShell",type:{name:"Composite",className:"ImageTemplatePowerShellValidator",uberParent:"ImageTemplateInVMValidator",polymorphicDiscriminator:ImageTemplateInVMValidator.type.polymorphicDiscriminator,modelProperties:Object.assign(Object.assign({},ImageTemplateInVMValidator.type.modelProperties),{scriptUri:{serializedName:"scriptUri",type:{name:"String"}},sha256Checksum:{defaultValue:"",serializedName:"sha256Checksum",type:{name:"String"}},inline:{serializedName:"inline",type:{name:"Sequence",element:{type:{name:"String"}}}},runElevated:{defaultValue:!1,serializedName:"runElevated",type:{name:"Boolean"}},runAsSystem:{defaultValue:!1,serializedName:"runAsSystem",type:{name:"Boolean"}},validExitCodes:{serializedName:"validExitCodes",type:{name:"Sequence",element:{type:{name:"Number"}}}}})}},ImageTemplateFileValidator={serializedName:"File",type:{name:"Composite",className:"ImageTemplateFileValidator",uberParent:"ImageTemplateInVMValidator",polymorphicDiscriminator:ImageTemplateInVMValidator.type.polymorphicDiscriminator,modelProperties:Object.assign(Object.assign({},ImageTemplateInVMValidator.type.modelProperties),{sourceUri:{serializedName:"sourceUri",type:{name:"String"}},sha256Checksum:{defaultValue:"",serializedName:"sha256Checksum",type:{name:"String"}},destination:{serializedName:"destination",type:{name:"String"}}})}},ImageTemplateManagedImageDistributor={serializedName:"ManagedImage",type:{name:"Composite",className:"ImageTemplateManagedImageDistributor",uberParent:"ImageTemplateDistributor",polymorphicDiscriminator:ImageTemplateDistributor.type.polymorphicDiscriminator,modelProperties:Object.assign(Object.assign({},ImageTemplateDistributor.type.modelProperties),{imageId:{serializedName:"imageId",required:!0,type:{name:"String"}},location:{serializedName:"location",required:!0,type:{name:"String"}}})}},ImageTemplateSharedImageDistributor={serializedName:"SharedImage",type:{name:"Composite",className:"ImageTemplateSharedImageDistributor",uberParent:"ImageTemplateDistributor",polymorphicDiscriminator:ImageTemplateDistributor.type.polymorphicDiscriminator,modelProperties:Object.assign(Object.assign({},ImageTemplateDistributor.type.modelProperties),{galleryImageId:{serializedName:"galleryImageId",required:!0,type:{name:"String"}},replicationRegions:{serializedName:"replicationRegions",type:{name:"Sequence",element:{type:{name:"String"}}}},excludeFromLatest:{defaultValue:!1,serializedName:"excludeFromLatest",type:{name:"Boolean"}},storageAccountType:{serializedName:"storageAccountType",type:{name:"String"}},targetRegions:{serializedName:"targetRegions",type:{name:"Sequence",element:{type:{name:"Composite",className:"TargetRegion"}}}},versioning:{serializedName:"versioning",type:{name:"Composite",className:"DistributeVersioner"}}})}},ImageTemplateVhdDistributor={serializedName:"VHD",type:{name:"Composite",className:"ImageTemplateVhdDistributor",uberParent:"ImageTemplateDistributor",polymorphicDiscriminator:ImageTemplateDistributor.type.polymorphicDiscriminator,modelProperties:Object.assign(Object.assign({},ImageTemplateDistributor.type.modelProperties),{uri:{serializedName:"uri",type:{name:"String"}}})}},TrackedResource={type:{name:"Composite",className:"TrackedResource",modelProperties:Object.assign(Object.assign({},Resource.type.modelProperties),{tags:{serializedName:"tags",type:{name:"Dictionary",value:{type:{name:"String"}}}},location:{serializedName:"location",required:!0,type:{name:"String"}}})}},ProxyResource={type:{name:"Composite",className:"ProxyResource",modelProperties:Object.assign({},Resource.type.modelProperties)}},SourceImageTriggerProperties={serializedName:"SourceImage",type:{name:"Composite",className:"SourceImageTriggerProperties",uberParent:"TriggerProperties",polymorphicDiscriminator:TriggerProperties.type.polymorphicDiscriminator,modelProperties:Object.assign({},TriggerProperties.type.modelProperties)}},DistributeVersionerLatest={serializedName:"Latest",type:{name:"Composite",className:"DistributeVersionerLatest",uberParent:"DistributeVersioner",polymorphicDiscriminator:DistributeVersioner.type.polymorphicDiscriminator,modelProperties:Object.assign(Object.assign({},DistributeVersioner.type.modelProperties),{major:{defaultValue:-1,constraints:{InclusiveMinimum:-1},serializedName:"major",type:{name:"Number"}}})}},DistributeVersionerSource={serializedName:"Source",type:{name:"Composite",className:"DistributeVersionerSource",uberParent:"DistributeVersioner",polymorphicDiscriminator:DistributeVersioner.type.polymorphicDiscriminator,modelProperties:Object.assign({},DistributeVersioner.type.modelProperties)}},ImageTemplate={type:{name:"Composite",className:"ImageTemplate",modelProperties:Object.assign(Object.assign({},TrackedResource.type.modelProperties),{identity:{serializedName:"identity",type:{name:"Composite",className:"ImageTemplateIdentity"}},source:{serializedName:"properties.source",type:{name:"Composite",className:"ImageTemplateSource"}},customize:{serializedName:"properties.customize",type:{name:"Sequence",element:{type:{name:"Composite",className:"ImageTemplateCustomizer"}}}},optimize:{serializedName:"properties.optimize",type:{name:"Composite",className:"ImageTemplatePropertiesOptimize"}},validate:{serializedName:"properties.validate",type:{name:"Composite",className:"ImageTemplatePropertiesValidate"}},distribute:{serializedName:"properties.distribute",type:{name:"Sequence",element:{type:{name:"Composite",className:"ImageTemplateDistributor"}}}},errorHandling:{serializedName:"properties.errorHandling",type:{name:"Composite",className:"ImageTemplatePropertiesErrorHandling"}},provisioningState:{serializedName:"properties.provisioningState",readOnly:!0,type:{name:"Enum",allowedValues:["Creating","Updating","Succeeded","Failed","Deleting","Canceled"]}},provisioningError:{serializedName:"properties.provisioningError",type:{name:"Composite",className:"ProvisioningError"}},lastRunStatus:{serializedName:"properties.lastRunStatus",type:{name:"Composite",className:"ImageTemplateLastRunStatus"}},buildTimeoutInMinutes:{defaultValue:0,constraints:{InclusiveMaximum:960,InclusiveMinimum:0},serializedName:"properties.buildTimeoutInMinutes",type:{name:"Number"}},vmProfile:{serializedName:"properties.vmProfile",type:{name:"Composite",className:"ImageTemplateVmProfile"}},stagingResourceGroup:{serializedName:"properties.stagingResourceGroup",type:{name:"String"}},exactStagingResourceGroup:{serializedName:"properties.exactStagingResourceGroup",readOnly:!0,type:{name:"String"}}})}},RunOutput={type:{name:"Composite",className:"RunOutput",modelProperties:Object.assign(Object.assign({},ProxyResource.type.modelProperties),{artifactId:{serializedName:"properties.artifactId",type:{name:"String"}},artifactUri:{serializedName:"properties.artifactUri",type:{name:"String"}},provisioningState:{serializedName:"properties.provisioningState",readOnly:!0,type:{name:"Enum",allowedValues:["Creating","Updating","Succeeded","Failed","Deleting","Canceled"]}}})}},Trigger={type:{name:"Composite",className:"Trigger",modelProperties:Object.assign(Object.assign({},ProxyResource.type.modelProperties),{kind:{serializedName:"properties.kind",type:{name:"String"}},status:{serializedName:"properties.status",type:{name:"Composite",className:"TriggerStatus"}},provisioningState:{serializedName:"properties.provisioningState",readOnly:!0,type:{name:"Enum",allowedValues:["Creating","Updating","Succeeded","Failed","Deleting","Canceled"]}}})}},VirtualMachineImageTemplatesDeleteHeaders={type:{name:"Composite",className:"VirtualMachineImageTemplatesDeleteHeaders",modelProperties:{location:{serializedName:"location",type:{name:"String"}}}}},TriggersDeleteHeaders={type:{name:"Composite",className:"TriggersDeleteHeaders",modelProperties:{location:{serializedName:"location",type:{name:"String"}}}}};let discriminators={ImageTemplateSource:ImageTemplateSource,ImageTemplateCustomizer:ImageTemplateCustomizer,ImageTemplateInVMValidator:ImageTemplateInVMValidator,ImageTemplateDistributor:ImageTemplateDistributor,TriggerProperties:TriggerProperties,DistributeVersioner:DistributeVersioner,"ImageTemplateSource.PlatformImage":ImageTemplatePlatformImageSource,"ImageTemplateSource.ManagedImage":ImageTemplateManagedImageSource,"ImageTemplateSource.SharedImageVersion":ImageTemplateSharedImageVersionSource,"ImageTemplateCustomizer.Shell":ImageTemplateShellCustomizer,"ImageTemplateCustomizer.WindowsRestart":ImageTemplateRestartCustomizer,"ImageTemplateCustomizer.WindowsUpdate":ImageTemplateWindowsUpdateCustomizer,"ImageTemplateCustomizer.PowerShell":ImageTemplatePowerShellCustomizer,"ImageTemplateCustomizer.File":ImageTemplateFileCustomizer,"ImageTemplateInVMValidator.Shell":ImageTemplateShellValidator,"ImageTemplateInVMValidator.PowerShell":ImageTemplatePowerShellValidator,"ImageTemplateInVMValidator.File":ImageTemplateFileValidator,"ImageTemplateDistributor.ManagedImage":ImageTemplateManagedImageDistributor,"ImageTemplateDistributor.SharedImage":ImageTemplateSharedImageDistributor,"ImageTemplateDistributor.VHD":ImageTemplateVhdDistributor,"TriggerProperties.SourceImage":SourceImageTriggerProperties,"DistributeVersioner.Latest":DistributeVersionerLatest,"DistributeVersioner.Source":DistributeVersionerSource};var Mappers=Object.freeze({__proto__:null,DistributeVersioner:DistributeVersioner,DistributeVersionerLatest:DistributeVersionerLatest,DistributeVersionerSource:DistributeVersionerSource,ErrorAdditionalInfo:ErrorAdditionalInfo,ErrorDetail:ErrorDetail,ErrorResponse:ErrorResponse,ImageTemplate:ImageTemplate,ImageTemplateCustomizer:ImageTemplateCustomizer,ImageTemplateDistributor:ImageTemplateDistributor,ImageTemplateFileCustomizer:ImageTemplateFileCustomizer,ImageTemplateFileValidator:ImageTemplateFileValidator,ImageTemplateIdentity:ImageTemplateIdentity,ImageTemplateInVMValidator:ImageTemplateInVMValidator,ImageTemplateLastRunStatus:ImageTemplateLastRunStatus,ImageTemplateListResult:ImageTemplateListResult,ImageTemplateManagedImageDistributor:ImageTemplateManagedImageDistributor,ImageTemplateManagedImageSource:ImageTemplateManagedImageSource,ImageTemplatePlatformImageSource:ImageTemplatePlatformImageSource,ImageTemplatePowerShellCustomizer:ImageTemplatePowerShellCustomizer,ImageTemplatePowerShellValidator:ImageTemplatePowerShellValidator,ImageTemplatePropertiesErrorHandling:ImageTemplatePropertiesErrorHandling,ImageTemplatePropertiesOptimize:ImageTemplatePropertiesOptimize,ImageTemplatePropertiesOptimizeVmBoot:ImageTemplatePropertiesOptimizeVmBoot,ImageTemplatePropertiesValidate:ImageTemplatePropertiesValidate,ImageTemplateRestartCustomizer:ImageTemplateRestartCustomizer,ImageTemplateSharedImageDistributor:ImageTemplateSharedImageDistributor,ImageTemplateSharedImageVersionSource:ImageTemplateSharedImageVersionSource,ImageTemplateShellCustomizer:ImageTemplateShellCustomizer,ImageTemplateShellValidator:ImageTemplateShellValidator,ImageTemplateSource:ImageTemplateSource,ImageTemplateUpdateParameters:ImageTemplateUpdateParameters,ImageTemplateUpdateParametersProperties:ImageTemplateUpdateParametersProperties,ImageTemplateVhdDistributor:ImageTemplateVhdDistributor,ImageTemplateVmProfile:ImageTemplateVmProfile,ImageTemplateWindowsUpdateCustomizer:ImageTemplateWindowsUpdateCustomizer,Operation:Operation,OperationDisplay:OperationDisplay,OperationListResult:OperationListResult,PlatformImagePurchasePlan:PlatformImagePurchasePlan,ProvisioningError:ProvisioningError,ProxyResource:ProxyResource,Resource:Resource,RunOutput:RunOutput,RunOutputCollection:RunOutputCollection,SourceImageTriggerProperties:SourceImageTriggerProperties,SystemData:SystemData,TargetRegion:TargetRegion,TrackedResource:TrackedResource,Trigger:Trigger,TriggerCollection:TriggerCollection,TriggerProperties:TriggerProperties,TriggerStatus:TriggerStatus,TriggersDeleteHeaders:TriggersDeleteHeaders,UserAssignedIdentity:UserAssignedIdentity,VirtualMachineImageTemplatesDeleteHeaders:VirtualMachineImageTemplatesDeleteHeaders,VirtualNetworkConfig:VirtualNetworkConfig,discriminators:discriminators});const accept={parameterPath:"accept",mapper:{defaultValue:"application/json",isConstant:!0,serializedName:"Accept",type:{name:"String"}}},$host={parameterPath:"$host",mapper:{serializedName:"$host",required:!0,type:{name:"String"}},skipEncoding:!0},subscriptionId={parameterPath:"subscriptionId",mapper:{serializedName:"subscriptionId",required:!0,type:{name:"String"}}},apiVersion={parameterPath:"apiVersion",mapper:{defaultValue:"2023-07-01",isConstant:!0,serializedName:"api-version",type:{name:"String"}}},resourceGroupName={parameterPath:"resourceGroupName",mapper:{serializedName:"resourceGroupName",required:!0,type:{name:"String"}}},contentType={parameterPath:["options","contentType"],mapper:{defaultValue:"application/json",isConstant:!0,serializedName:"Content-Type",type:{name:"String"}}},parameters={parameterPath:"parameters",mapper:ImageTemplate},imageTemplateName={parameterPath:"imageTemplateName",mapper:{constraints:{Pattern:new RegExp("^[A-Za-z0-9-_.]{1,64}$")},serializedName:"imageTemplateName",required:!0,type:{name:"String"}}},parameters1={parameterPath:"parameters",mapper:ImageTemplateUpdateParameters},runOutputName={parameterPath:"runOutputName",mapper:{constraints:{Pattern:new RegExp("^[A-Za-z0-9-_.]{1,64}$")},serializedName:"runOutputName",required:!0,type:{name:"String"}}},nextLink={parameterPath:"nextLink",mapper:{serializedName:"nextLink",required:!0,type:{name:"String"}},skipEncoding:!0},triggerName={parameterPath:"triggerName",mapper:{constraints:{Pattern:new RegExp("^[A-Za-z0-9-_.]{1,64}$")},serializedName:"triggerName",required:!0,type:{name:"String"}}},parameters2={parameterPath:"parameters",mapper:Trigger};function createLroSpec(e){const{args:r,spec:i,sendOperationFn:s}=e;return{requestMethod:i.httpMethod,requestPath:i.path,sendInitialRequest:()=>s(r,i),sendPollRequest:(e,a)=>{var t=tslib.__rest(i,["requestBody"]);return s(r,Object.assign(Object.assign({},t),{httpMethod:"GET",path:e,abortSignal:null==a?void 0:a.abortSignal}))}}}class VirtualMachineImageTemplatesImpl{constructor(e){this.client=e}list(a){const e=this.listPagingAll(a);return{next(){return e.next()},[Symbol.asyncIterator](){return this},byPage:e=>{if(null!=e&&e.maxPageSize)throw new Error("maxPageSize is not supported by this operation.");return this.listPagingPage(a,e)}}}listPagingPage(i,s){return tslib.__asyncGenerator(this,arguments,function*(){let e,a=null==s?void 0:s.continuationToken;var t;for(a||(setContinuationToken(t=(e=yield tslib.__await(this._list(i))).value||[],a=e.nextLink),yield yield tslib.__await(t));a;){e=yield tslib.__await(this._listNext(a,i)),a=e.nextLink;var r=e.value||[];setContinuationToken(r,a),yield yield tslib.__await(r)}})}listPagingAll(n){return tslib.__asyncGenerator(this,arguments,function*(){var e,a,t;try{for(var r,i=!0,s=tslib.__asyncValues(this.listPagingPage(n));!(e=(r=yield tslib.__await(s.next())).done);i=!0){var o=r.value,i=!1;yield tslib.__await(yield*tslib.__asyncDelegator(tslib.__asyncValues(o)))}}catch(e){a={error:e}}finally{try{i||e||!(t=s.return)||(yield tslib.__await(t.call(s)))}finally{if(a)throw a.error}}})}listByResourceGroup(a,t){const e=this.listByResourceGroupPagingAll(a,t);return{next(){return e.next()},[Symbol.asyncIterator](){return this},byPage:e=>{if(null!=e&&e.maxPageSize)throw new Error("maxPageSize is not supported by this operation.");return this.listByResourceGroupPagingPage(a,t,e)}}}listByResourceGroupPagingPage(i,s,o){return tslib.__asyncGenerator(this,arguments,function*(){let e,a=null==o?void 0:o.continuationToken;var t;for(a||(setContinuationToken(t=(e=yield tslib.__await(this._listByResourceGroup(i,s))).value||[],a=e.nextLink),yield yield tslib.__await(t));a;){e=yield tslib.__await(this._listByResourceGroupNext(i,a,s)),a=e.nextLink;var r=e.value||[];setContinuationToken(r,a),yield yield tslib.__await(r)}})}listByResourceGroupPagingAll(n,m){return tslib.__asyncGenerator(this,arguments,function*(){var e,a,t;try{for(var r,i=!0,s=tslib.__asyncValues(this.listByResourceGroupPagingPage(n,m));!(e=(r=yield tslib.__await(s.next())).done);i=!0){var o=r.value,i=!1;yield tslib.__await(yield*tslib.__asyncDelegator(tslib.__asyncValues(o)))}}catch(e){a={error:e}}finally{try{i||e||!(t=s.return)||(yield tslib.__await(t.call(s)))}finally{if(a)throw a.error}}})}listRunOutputs(a,t,r){const e=this.listRunOutputsPagingAll(a,t,r);return{next(){return e.next()},[Symbol.asyncIterator](){return this},byPage:e=>{if(null!=e&&e.maxPageSize)throw new Error("maxPageSize is not supported by this operation.");return this.listRunOutputsPagingPage(a,t,r,e)}}}listRunOutputsPagingPage(i,s,o,n){return tslib.__asyncGenerator(this,arguments,function*(){let e,a=null==n?void 0:n.continuationToken;var t;for(a||(setContinuationToken(t=(e=yield tslib.__await(this._listRunOutputs(i,s,o))).value||[],a=e.nextLink),yield yield tslib.__await(t));a;){e=yield tslib.__await(this._listRunOutputsNext(i,s,a,o)),a=e.nextLink;var r=e.value||[];setContinuationToken(r,a),yield yield tslib.__await(r)}})}listRunOutputsPagingAll(n,m,p){return tslib.__asyncGenerator(this,arguments,function*(){var e,a,t;try{for(var r,i=!0,s=tslib.__asyncValues(this.listRunOutputsPagingPage(n,m,p));!(e=(r=yield tslib.__await(s.next())).done);i=!0){var o=r.value,i=!1;yield tslib.__await(yield*tslib.__asyncDelegator(tslib.__asyncValues(o)))}}catch(e){a={error:e}}finally{try{i||e||!(t=s.return)||(yield tslib.__await(t.call(s)))}finally{if(a)throw a.error}}})}_list(e){return this.client.sendOperationRequest({options:e},listOperationSpec$1)}_listByResourceGroup(e,a){return this.client.sendOperationRequest({resourceGroupName:e,options:a},listByResourceGroupOperationSpec)}beginCreateOrUpdate(a,t,r,i){return tslib.__awaiter(this,void 0,void 0,function*(){const s=(e,a)=>tslib.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(e,a)});var e=createLroSpec({sendOperationFn:(a,i)=>tslib.__awaiter(this,void 0,void 0,function*(){let t=void 0;const r=null==(e=a.options)?void 0:e.onResponse;var e=Object.assign(Object.assign({},a),{options:Object.assign(Object.assign({},a.options),{onResponse:(e,a)=>{t=e,null!==r&&void 0!==r&&r(e,a)}})});return{flatResponse:yield s(e,i),rawResponse:{statusCode:t.status,body:t.parsedBody,headers:t.headers.toJSON()}}}),args:{resourceGroupName:a,imageTemplateName:t,parameters:r,options:i},spec:createOrUpdateOperationSpec$1}),e=yield coreLro.createHttpPoller(e,{restoreFrom:null==i?void 0:i.resumeFrom,intervalInMs:null==i?void 0:i.updateIntervalInMs,resourceLocationConfig:"azure-async-operation"});return yield e.poll(),e})}beginCreateOrUpdateAndWait(e,a,t,r){return tslib.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreateOrUpdate(e,a,t,r)).pollUntilDone()})}beginUpdate(a,t,r,i){return tslib.__awaiter(this,void 0,void 0,function*(){const s=(e,a)=>tslib.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(e,a)});var e=createLroSpec({sendOperationFn:(a,i)=>tslib.__awaiter(this,void 0,void 0,function*(){let t=void 0;const r=null==(e=a.options)?void 0:e.onResponse;var e=Object.assign(Object.assign({},a),{options:Object.assign(Object.assign({},a.options),{onResponse:(e,a)=>{t=e,null!==r&&void 0!==r&&r(e,a)}})});return{flatResponse:yield s(e,i),rawResponse:{statusCode:t.status,body:t.parsedBody,headers:t.headers.toJSON()}}}),args:{resourceGroupName:a,imageTemplateName:t,parameters:r,options:i},spec:updateOperationSpec}),e=yield coreLro.createHttpPoller(e,{restoreFrom:null==i?void 0:i.resumeFrom,intervalInMs:null==i?void 0:i.updateIntervalInMs,resourceLocationConfig:"azure-async-operation"});return yield e.poll(),e})}beginUpdateAndWait(e,a,t,r){return tslib.__awaiter(this,void 0,void 0,function*(){return(yield this.beginUpdate(e,a,t,r)).pollUntilDone()})}get(e,a,t){return this.client.sendOperationRequest({resourceGroupName:e,imageTemplateName:a,options:t},getOperationSpec$1)}beginDelete(a,t,r){return tslib.__awaiter(this,void 0,void 0,function*(){const s=(e,a)=>tslib.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(e,a)});var e=createLroSpec({sendOperationFn:(a,i)=>tslib.__awaiter(this,void 0,void 0,function*(){let t=void 0;const r=null==(e=a.options)?void 0:e.onResponse;var e=Object.assign(Object.assign({},a),{options:Object.assign(Object.assign({},a.options),{onResponse:(e,a)=>{t=e,null!==r&&void 0!==r&&r(e,a)}})});return{flatResponse:yield s(e,i),rawResponse:{statusCode:t.status,body:t.parsedBody,headers:t.headers.toJSON()}}}),args:{resourceGroupName:a,imageTemplateName:t,options:r},spec:deleteOperationSpec$1}),e=yield coreLro.createHttpPoller(e,{restoreFrom:null==r?void 0:r.resumeFrom,intervalInMs:null==r?void 0:r.updateIntervalInMs,resourceLocationConfig:"location"});return yield e.poll(),e})}beginDeleteAndWait(e,a,t){return tslib.__awaiter(this,void 0,void 0,function*(){return(yield this.beginDelete(e,a,t)).pollUntilDone()})}beginRun(a,t,r){return tslib.__awaiter(this,void 0,void 0,function*(){const s=(e,a)=>tslib.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(e,a)});var e=createLroSpec({sendOperationFn:(a,i)=>tslib.__awaiter(this,void 0,void 0,function*(){let t=void 0;const r=null==(e=a.options)?void 0:e.onResponse;var e=Object.assign(Object.assign({},a),{options:Object.assign(Object.assign({},a.options),{onResponse:(e,a)=>{t=e,null!==r&&void 0!==r&&r(e,a)}})});return{flatResponse:yield s(e,i),rawResponse:{statusCode:t.status,body:t.parsedBody,headers:t.headers.toJSON()}}}),args:{resourceGroupName:a,imageTemplateName:t,options:r},spec:runOperationSpec}),e=yield coreLro.createHttpPoller(e,{restoreFrom:null==r?void 0:r.resumeFrom,intervalInMs:null==r?void 0:r.updateIntervalInMs,resourceLocationConfig:"azure-async-operation"});return yield e.poll(),e})}beginRunAndWait(e,a,t){return tslib.__awaiter(this,void 0,void 0,function*(){return(yield this.beginRun(e,a,t)).pollUntilDone()})}beginCancel(a,t,r){return tslib.__awaiter(this,void 0,void 0,function*(){const s=(e,a)=>tslib.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(e,a)});var e=createLroSpec({sendOperationFn:(a,i)=>tslib.__awaiter(this,void 0,void 0,function*(){let t=void 0;const r=null==(e=a.options)?void 0:e.onResponse;var e=Object.assign(Object.assign({},a),{options:Object.assign(Object.assign({},a.options),{onResponse:(e,a)=>{t=e,null!==r&&void 0!==r&&r(e,a)}})});return{flatResponse:yield s(e,i),rawResponse:{statusCode:t.status,body:t.parsedBody,headers:t.headers.toJSON()}}}),args:{resourceGroupName:a,imageTemplateName:t,options:r},spec:cancelOperationSpec}),e=yield coreLro.createHttpPoller(e,{restoreFrom:null==r?void 0:r.resumeFrom,intervalInMs:null==r?void 0:r.updateIntervalInMs,resourceLocationConfig:"azure-async-operation"});return yield e.poll(),e})}beginCancelAndWait(e,a,t){return tslib.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCancel(e,a,t)).pollUntilDone()})}_listRunOutputs(e,a,t){return this.client.sendOperationRequest({resourceGroupName:e,imageTemplateName:a,options:t},listRunOutputsOperationSpec)}getRunOutput(e,a,t,r){return this.client.sendOperationRequest({resourceGroupName:e,imageTemplateName:a,runOutputName:t,options:r},getRunOutputOperationSpec)}_listNext(e,a){return this.client.sendOperationRequest({nextLink:e,options:a},listNextOperationSpec$1)}_listByResourceGroupNext(e,a,t){return this.client.sendOperationRequest({resourceGroupName:e,nextLink:a,options:t},listByResourceGroupNextOperationSpec)}_listRunOutputsNext(e,a,t,r){return this.client.sendOperationRequest({resourceGroupName:e,imageTemplateName:a,nextLink:t,options:r},listRunOutputsNextOperationSpec)}}const serializer$2=coreClient__namespace.createSerializer(Mappers,!1),listOperationSpec$1={path:"/subscriptions/{subscriptionId}/providers/Microsoft.VirtualMachineImages/imageTemplates",httpMethod:"GET",responses:{200:{bodyMapper:ImageTemplateListResult},default:{bodyMapper:ErrorResponse}},queryParameters:[apiVersion],urlParameters:[$host,subscriptionId],headerParameters:[accept],serializer:serializer$2},listByResourceGroupOperationSpec={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.VirtualMachineImages/imageTemplates",httpMethod:"GET",responses:{200:{bodyMapper:ImageTemplateListResult},default:{bodyMapper:ErrorResponse}},queryParameters:[apiVersion],urlParameters:[$host,subscriptionId,resourceGroupName],headerParameters:[accept],serializer:serializer$2},createOrUpdateOperationSpec$1={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.VirtualMachineImages/imageTemplates/{imageTemplateName}",httpMethod:"PUT",responses:{200:{bodyMapper:ImageTemplate},201:{bodyMapper:ImageTemplate},202:{bodyMapper:ImageTemplate},204:{bodyMapper:ImageTemplate},default:{bodyMapper:ErrorResponse}},requestBody:parameters,queryParameters:[apiVersion],urlParameters:[$host,subscriptionId,resourceGroupName,imageTemplateName],headerParameters:[accept,contentType],mediaType:"json",serializer:serializer$2},updateOperationSpec={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.VirtualMachineImages/imageTemplates/{imageTemplateName}",httpMethod:"PATCH",responses:{200:{bodyMapper:ImageTemplate},201:{bodyMapper:ImageTemplate},202:{bodyMapper:ImageTemplate},204:{bodyMapper:ImageTemplate},default:{bodyMapper:ErrorResponse}},requestBody:parameters1,queryParameters:[apiVersion],urlParameters:[$host,subscriptionId,resourceGroupName,imageTemplateName],headerParameters:[accept,contentType],mediaType:"json",serializer:serializer$2},getOperationSpec$1={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.VirtualMachineImages/imageTemplates/{imageTemplateName}",httpMethod:"GET",responses:{200:{bodyMapper:ImageTemplate},default:{bodyMapper:ErrorResponse}},queryParameters:[apiVersion],urlParameters:[$host,subscriptionId,resourceGroupName,imageTemplateName],headerParameters:[accept],serializer:serializer$2},deleteOperationSpec$1={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.VirtualMachineImages/imageTemplates/{imageTemplateName}",httpMethod:"DELETE",responses:{200:{headersMapper:VirtualMachineImageTemplatesDeleteHeaders},201:{headersMapper:VirtualMachineImageTemplatesDeleteHeaders},202:{headersMapper:VirtualMachineImageTemplatesDeleteHeaders},204:{headersMapper:VirtualMachineImageTemplatesDeleteHeaders},default:{bodyMapper:ErrorResponse}},queryParameters:[apiVersion],urlParameters:[$host,subscriptionId,resourceGroupName,imageTemplateName],headerParameters:[accept],serializer:serializer$2},runOperationSpec={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.VirtualMachineImages/imageTemplates/{imageTemplateName}/run",httpMethod:"POST",responses:{200:{},201:{},202:{},204:{},default:{bodyMapper:ErrorResponse}},queryParameters:[apiVersion],urlParameters:[$host,subscriptionId,resourceGroupName,imageTemplateName],headerParameters:[accept],serializer:serializer$2},cancelOperationSpec={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.VirtualMachineImages/imageTemplates/{imageTemplateName}/cancel",httpMethod:"POST",responses:{200:{},201:{},202:{},204:{},default:{bodyMapper:ErrorResponse}},queryParameters:[apiVersion],urlParameters:[$host,subscriptionId,resourceGroupName,imageTemplateName],headerParameters:[accept],serializer:serializer$2},listRunOutputsOperationSpec={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.VirtualMachineImages/imageTemplates/{imageTemplateName}/runOutputs",httpMethod:"GET",responses:{200:{bodyMapper:RunOutputCollection},default:{bodyMapper:ErrorResponse}},queryParameters:[apiVersion],urlParameters:[$host,subscriptionId,resourceGroupName,imageTemplateName],headerParameters:[accept],serializer:serializer$2},getRunOutputOperationSpec={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.VirtualMachineImages/imageTemplates/{imageTemplateName}/runOutputs/{runOutputName}",httpMethod:"GET",responses:{200:{bodyMapper:RunOutput},default:{bodyMapper:ErrorResponse}},queryParameters:[apiVersion],urlParameters:[$host,subscriptionId,resourceGroupName,imageTemplateName,runOutputName],headerParameters:[accept],serializer:serializer$2},listNextOperationSpec$1={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:ImageTemplateListResult},default:{bodyMapper:ErrorResponse}},urlParameters:[$host,subscriptionId,nextLink],headerParameters:[accept],serializer:serializer$2},listByResourceGroupNextOperationSpec={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:ImageTemplateListResult},default:{bodyMapper:ErrorResponse}},urlParameters:[$host,subscriptionId,resourceGroupName,nextLink],headerParameters:[accept],serializer:serializer$2},listRunOutputsNextOperationSpec={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:RunOutputCollection},default:{bodyMapper:ErrorResponse}},urlParameters:[$host,subscriptionId,resourceGroupName,imageTemplateName,nextLink],headerParameters:[accept],serializer:serializer$2};class TriggersImpl{constructor(e){this.client=e}listByImageTemplate(a,t,r){const e=this.listByImageTemplatePagingAll(a,t,r);return{next(){return e.next()},[Symbol.asyncIterator](){return this},byPage:e=>{if(null!=e&&e.maxPageSize)throw new Error("maxPageSize is not supported by this operation.");return this.listByImageTemplatePagingPage(a,t,r,e)}}}listByImageTemplatePagingPage(i,s,o,n){return tslib.__asyncGenerator(this,arguments,function*(){let e,a=null==n?void 0:n.continuationToken;var t;for(a||(setContinuationToken(t=(e=yield tslib.__await(this._listByImageTemplate(i,s,o))).value||[],a=e.nextLink),yield yield tslib.__await(t));a;){e=yield tslib.__await(this._listByImageTemplateNext(i,s,a,o)),a=e.nextLink;var r=e.value||[];setContinuationToken(r,a),yield yield tslib.__await(r)}})}listByImageTemplatePagingAll(n,m,p){return tslib.__asyncGenerator(this,arguments,function*(){var e,a,t;try{for(var r,i=!0,s=tslib.__asyncValues(this.listByImageTemplatePagingPage(n,m,p));!(e=(r=yield tslib.__await(s.next())).done);i=!0){var o=r.value,i=!1;yield tslib.__await(yield*tslib.__asyncDelegator(tslib.__asyncValues(o)))}}catch(e){a={error:e}}finally{try{i||e||!(t=s.return)||(yield tslib.__await(t.call(s)))}finally{if(a)throw a.error}}})}_listByImageTemplate(e,a,t){return this.client.sendOperationRequest({resourceGroupName:e,imageTemplateName:a,options:t},listByImageTemplateOperationSpec)}get(e,a,t,r){return this.client.sendOperationRequest({resourceGroupName:e,imageTemplateName:a,triggerName:t,options:r},getOperationSpec)}beginCreateOrUpdate(a,t,r,i,o){return tslib.__awaiter(this,void 0,void 0,function*(){const s=(e,a)=>tslib.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(e,a)});var e=createLroSpec({sendOperationFn:(a,i)=>tslib.__awaiter(this,void 0,void 0,function*(){let t=void 0;const r=null==(e=a.options)?void 0:e.onResponse;var e=Object.assign(Object.assign({},a),{options:Object.assign(Object.assign({},a.options),{onResponse:(e,a)=>{t=e,null!==r&&void 0!==r&&r(e,a)}})});return{flatResponse:yield s(e,i),rawResponse:{statusCode:t.status,body:t.parsedBody,headers:t.headers.toJSON()}}}),args:{resourceGroupName:a,imageTemplateName:t,triggerName:r,parameters:i,options:o},spec:createOrUpdateOperationSpec}),e=yield coreLro.createHttpPoller(e,{restoreFrom:null==o?void 0:o.resumeFrom,intervalInMs:null==o?void 0:o.updateIntervalInMs,resourceLocationConfig:"azure-async-operation"});return yield e.poll(),e})}beginCreateOrUpdateAndWait(e,a,t,r,i){return tslib.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreateOrUpdate(e,a,t,r,i)).pollUntilDone()})}beginDelete(a,t,r,i){return tslib.__awaiter(this,void 0,void 0,function*(){const s=(e,a)=>tslib.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(e,a)});var e=createLroSpec({sendOperationFn:(a,i)=>tslib.__awaiter(this,void 0,void 0,function*(){let t=void 0;const r=null==(e=a.options)?void 0:e.onResponse;var e=Object.assign(Object.assign({},a),{options:Object.assign(Object.assign({},a.options),{onResponse:(e,a)=>{t=e,null!==r&&void 0!==r&&r(e,a)}})});return{flatResponse:yield s(e,i),rawResponse:{statusCode:t.status,body:t.parsedBody,headers:t.headers.toJSON()}}}),args:{resourceGroupName:a,imageTemplateName:t,triggerName:r,options:i},spec:deleteOperationSpec}),e=yield coreLro.createHttpPoller(e,{restoreFrom:null==i?void 0:i.resumeFrom,intervalInMs:null==i?void 0:i.updateIntervalInMs,resourceLocationConfig:"location"});return yield e.poll(),e})}beginDeleteAndWait(e,a,t,r){return tslib.__awaiter(this,void 0,void 0,function*(){return(yield this.beginDelete(e,a,t,r)).pollUntilDone()})}_listByImageTemplateNext(e,a,t,r){return this.client.sendOperationRequest({resourceGroupName:e,imageTemplateName:a,nextLink:t,options:r},listByImageTemplateNextOperationSpec)}}const serializer$1=coreClient__namespace.createSerializer(Mappers,!1),listByImageTemplateOperationSpec={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.VirtualMachineImages/imageTemplates/{imageTemplateName}/triggers",httpMethod:"GET",responses:{200:{bodyMapper:TriggerCollection},default:{bodyMapper:ErrorResponse}},queryParameters:[apiVersion],urlParameters:[$host,subscriptionId,resourceGroupName,imageTemplateName],headerParameters:[accept],serializer:serializer$1},getOperationSpec={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.VirtualMachineImages/imageTemplates/{imageTemplateName}/triggers/{triggerName}",httpMethod:"GET",responses:{200:{bodyMapper:Trigger},default:{bodyMapper:ErrorResponse}},queryParameters:[apiVersion],urlParameters:[$host,subscriptionId,resourceGroupName,imageTemplateName,triggerName],headerParameters:[accept],serializer:serializer$1},createOrUpdateOperationSpec={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.VirtualMachineImages/imageTemplates/{imageTemplateName}/triggers/{triggerName}",httpMethod:"PUT",responses:{200:{bodyMapper:Trigger},201:{bodyMapper:Trigger},202:{bodyMapper:Trigger},204:{bodyMapper:Trigger},default:{bodyMapper:ErrorResponse}},requestBody:parameters2,queryParameters:[apiVersion],urlParameters:[$host,subscriptionId,resourceGroupName,imageTemplateName,triggerName],headerParameters:[accept,contentType],mediaType:"json",serializer:serializer$1},deleteOperationSpec={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.VirtualMachineImages/imageTemplates/{imageTemplateName}/triggers/{triggerName}",httpMethod:"DELETE",responses:{200:{headersMapper:TriggersDeleteHeaders},201:{headersMapper:TriggersDeleteHeaders},202:{headersMapper:TriggersDeleteHeaders},204:{headersMapper:TriggersDeleteHeaders},default:{bodyMapper:ErrorResponse}},queryParameters:[apiVersion],urlParameters:[$host,subscriptionId,resourceGroupName,imageTemplateName,triggerName],headerParameters:[accept],serializer:serializer$1},listByImageTemplateNextOperationSpec={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:TriggerCollection},default:{bodyMapper:ErrorResponse}},urlParameters:[$host,subscriptionId,resourceGroupName,imageTemplateName,nextLink],headerParameters:[accept],serializer:serializer$1};class OperationsImpl{constructor(e){this.client=e}list(a){const e=this.listPagingAll(a);return{next(){return e.next()},[Symbol.asyncIterator](){return this},byPage:e=>{if(null!=e&&e.maxPageSize)throw new Error("maxPageSize is not supported by this operation.");return this.listPagingPage(a,e)}}}listPagingPage(i,s){return tslib.__asyncGenerator(this,arguments,function*(){let e,a=null==s?void 0:s.continuationToken;var t;for(a||(setContinuationToken(t=(e=yield tslib.__await(this._list(i))).value||[],a=e.nextLink),yield yield tslib.__await(t));a;){e=yield tslib.__await(this._listNext(a,i)),a=e.nextLink;var r=e.value||[];setContinuationToken(r,a),yield yield tslib.__await(r)}})}listPagingAll(n){return tslib.__asyncGenerator(this,arguments,function*(){var e,a,t;try{for(var r,i=!0,s=tslib.__asyncValues(this.listPagingPage(n));!(e=(r=yield tslib.__await(s.next())).done);i=!0){var o=r.value,i=!1;yield tslib.__await(yield*tslib.__asyncDelegator(tslib.__asyncValues(o)))}}catch(e){a={error:e}}finally{try{i||e||!(t=s.return)||(yield tslib.__await(t.call(s)))}finally{if(a)throw a.error}}})}_list(e){return this.client.sendOperationRequest({options:e},listOperationSpec)}_listNext(e,a){return this.client.sendOperationRequest({nextLink:e,options:a},listNextOperationSpec)}}const serializer=coreClient__namespace.createSerializer(Mappers,!1),listOperationSpec={path:"/providers/Microsoft.VirtualMachineImages/operations",httpMethod:"GET",responses:{200:{bodyMapper:OperationListResult},default:{bodyMapper:ErrorResponse}},queryParameters:[apiVersion],urlParameters:[$host],headerParameters:[accept],serializer:serializer},listNextOperationSpec={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:OperationListResult},default:{bodyMapper:ErrorResponse}},urlParameters:[$host,nextLink],headerParameters:[accept],serializer:serializer};class ImageBuilderClient extends coreClient__namespace.ServiceClient{constructor(e,a,t){if(void 0===e)throw new Error("'credentials' cannot be null");if(void 0===a)throw new Error("'subscriptionId' cannot be null");var r,i="azsdk-js-arm-imagebuilder/4.0.0",i=(t=t||{}).userAgentOptions&&t.userAgentOptions.userAgentPrefix?t.userAgentOptions.userAgentPrefix+" "+i:i,i=Object.assign(Object.assign(Object.assign({},{requestContentType:"application/json; charset=utf-8",credential:e}),t),{userAgentOptions:{userAgentPrefix:i},endpoint:null!=(i=null!=(i=t.endpoint)?i:t.baseUri)?i:"https://management.azure.com"});super(i);let s=!1;null!=t&&t.pipeline&&0<t.pipeline.getOrderedPolicies().length&&(r=t.pipeline.getOrderedPolicies(),s=r.some(e=>e.name===coreRestPipeline__namespace.bearerTokenAuthenticationPolicyName)),t&&t.pipeline&&0!=t.pipeline.getOrderedPolicies().length&&s||(this.pipeline.removePolicy({name:coreRestPipeline__namespace.bearerTokenAuthenticationPolicyName}),this.pipeline.addPolicy(coreRestPipeline__namespace.bearerTokenAuthenticationPolicy({credential:e,scopes:null!=(r=i.credentialScopes)?r:i.endpoint+"/.default",challengeCallbacks:{authorizeRequestOnChallenge:coreClient__namespace.authorizeRequestOnClaimChallenge}}))),this.subscriptionId=a,this.$host=t.$host||"https://management.azure.com",this.apiVersion=t.apiVersion||"2023-07-01",this.virtualMachineImageTemplates=new VirtualMachineImageTemplatesImpl(this),this.triggers=new TriggersImpl(this),this.operations=new OperationsImpl(this),this.addCustomApiVersionPolicy(t.apiVersion)}addCustomApiVersionPolicy(i){i&&this.pipeline.addPolicy({name:"CustomApiVersionPolicy",sendRequest(t,r){return tslib.__awaiter(this,void 0,void 0,function*(){var e,a=t.url.split("?");return 1<a.length&&(e=a[1].split("&").map(e=>-1<e.indexOf("api-version")?"api-version="+i:e),t.url=a[0]+"?"+e.join("&")),r(t)})}})}}exports.ImageBuilderClient=ImageBuilderClient,exports.getContinuationToken=getContinuationToken;