"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var tslib=require("tslib"),coreClient=require("@azure/core-client"),coreRestPipeline=require("@azure/core-rest-pipeline"),coreLro=require("@azure/core-lro");function _interopNamespace(t){var a;return t&&t.__esModule?t:(a=Object.create(null),t&&Object.keys(t).forEach(function(e){var r;"default"!==e&&(r=Object.getOwnPropertyDescriptor(t,e),Object.defineProperty(a,e,r.get?r:{enumerable:!0,get:function(){return t[e]}}))}),a.default=t,Object.freeze(a))}var coreClient__namespace=_interopNamespace(coreClient),coreRestPipeline__namespace=_interopNamespace(coreRestPipeline);const pageMap=new WeakMap;function getContinuationToken(e){return"object"!=typeof e||null===e||null==(e=pageMap.get(e))?void 0:e.continuationToken}exports.KnownAzureSkuName=void 0,(exports.KnownAzureSkuName||(exports.KnownAzureSkuName={})).S1="S1",exports.KnownAzureSkuTier=void 0,(exports.KnownAzureSkuTier||(exports.KnownAzureSkuTier={})).Standard="Standard",exports.KnownCheckNameReason=void 0,function(e){e.Unavailable="Unavailable",e.Invalid="Invalid"}(exports.KnownCheckNameReason||(exports.KnownCheckNameReason={}));const WorkspaceCollection={type:{name:"Composite",className:"WorkspaceCollection",modelProperties:{id:{serializedName:"id",type:{name:"String"}},name:{serializedName:"name",type:{name:"String"}},type:{serializedName:"type",type:{name:"String"}},location:{serializedName:"location",type:{name:"String"}},tags:{serializedName:"tags",type:{name:"Dictionary",value:{type:{name:"String"}}}},sku:{serializedName:"sku",type:{name:"Composite",className:"AzureSku"}},properties:{serializedName:"properties",type:{name:"Dictionary",value:{type:{name:"any"}}}}}}},AzureSku={type:{name:"Composite",className:"AzureSku",modelProperties:{name:{serializedName:"name",required:!0,type:{name:"String"}},tier:{serializedName:"tier",required:!0,type:{name:"String"}}}}},ErrorModel={type:{name:"Composite",className:"ErrorModel",modelProperties:{code:{serializedName:"code",type:{name:"String"}},message:{serializedName:"message",type:{name:"String"}},target:{serializedName:"target",type:{name:"String"}},details:{serializedName:"details",type:{name:"Sequence",element:{type:{name:"Composite",className:"ErrorDetail"}}}}}}},ErrorDetail={type:{name:"Composite",className:"ErrorDetail",modelProperties:{code:{serializedName:"code",type:{name:"String"}},message:{serializedName:"message",type:{name:"String"}},target:{serializedName:"target",type:{name:"String"}}}}},CreateWorkspaceCollectionRequest={type:{name:"Composite",className:"CreateWorkspaceCollectionRequest",modelProperties:{location:{serializedName:"location",type:{name:"String"}},tags:{serializedName:"tags",type:{name:"Dictionary",value:{type:{name:"String"}}}},sku:{serializedName:"sku",type:{name:"Composite",className:"AzureSku"}}}}},UpdateWorkspaceCollectionRequest={type:{name:"Composite",className:"UpdateWorkspaceCollectionRequest",modelProperties:{tags:{serializedName:"tags",type:{name:"Dictionary",value:{type:{name:"String"}}}},sku:{serializedName:"sku",type:{name:"Composite",className:"AzureSku"}}}}},CheckNameRequest={type:{name:"Composite",className:"CheckNameRequest",modelProperties:{name:{serializedName:"name",type:{name:"String"}},type:{defaultValue:"Microsoft.PowerBI/workspaceCollections",serializedName:"type",type:{name:"String"}}}}},CheckNameResponse={type:{name:"Composite",className:"CheckNameResponse",modelProperties:{nameAvailable:{serializedName:"nameAvailable",type:{name:"Boolean"}},reason:{serializedName:"reason",type:{name:"String"}},message:{serializedName:"message",type:{name:"String"}}}}},WorkspaceCollectionList={type:{name:"Composite",className:"WorkspaceCollectionList",modelProperties:{value:{serializedName:"value",type:{name:"Sequence",element:{type:{name:"Composite",className:"WorkspaceCollection"}}}}}}},WorkspaceCollectionAccessKeys={type:{name:"Composite",className:"WorkspaceCollectionAccessKeys",modelProperties:{key1:{serializedName:"key1",type:{name:"String"}},key2:{serializedName:"key2",type:{name:"String"}}}}},WorkspaceCollectionAccessKey={type:{name:"Composite",className:"WorkspaceCollectionAccessKey",modelProperties:{keyName:{serializedName:"keyName",type:{name:"Enum",allowedValues:["key1","key2"]}}}}},OperationList={type:{name:"Composite",className:"OperationList",modelProperties:{value:{serializedName:"value",type:{name:"Sequence",element:{type:{name:"Composite",className:"Operation"}}}}}}},Operation={type:{name:"Composite",className:"Operation",modelProperties:{name:{serializedName:"name",type:{name:"String"}},display:{serializedName:"display",type:{name:"Composite",className:"Display"}}}}},Display={type:{name:"Composite",className:"Display",modelProperties:{provider:{serializedName:"provider",type:{name:"String"}},resource:{serializedName:"resource",type:{name:"String"}},operation:{serializedName:"operation",type:{name:"String"}},description:{serializedName:"description",type:{name:"String"}},origin:{serializedName:"origin",type:{name:"String"}}}}},WorkspaceList={type:{name:"Composite",className:"WorkspaceList",modelProperties:{value:{serializedName:"value",type:{name:"Sequence",element:{type:{name:"Composite",className:"Workspace"}}}}}}},Workspace={type:{name:"Composite",className:"Workspace",modelProperties:{id:{serializedName:"id",type:{name:"String"}},name:{serializedName:"name",type:{name:"String"}},type:{serializedName:"type",type:{name:"String"}},properties:{serializedName:"properties",type:{name:"Dictionary",value:{type:{name:"any"}}}}}}},MigrateWorkspaceCollectionRequest={type:{name:"Composite",className:"MigrateWorkspaceCollectionRequest",modelProperties:{targetResourceGroup:{serializedName:"targetResourceGroup",type:{name:"String"}},resources:{serializedName:"resources",type:{name:"Sequence",element:{type:{name:"String"}}}}}}};var Mappers=Object.freeze({__proto__:null,WorkspaceCollection:WorkspaceCollection,AzureSku:AzureSku,ErrorModel:ErrorModel,ErrorDetail:ErrorDetail,CreateWorkspaceCollectionRequest:CreateWorkspaceCollectionRequest,UpdateWorkspaceCollectionRequest:UpdateWorkspaceCollectionRequest,CheckNameRequest:CheckNameRequest,CheckNameResponse:CheckNameResponse,WorkspaceCollectionList:WorkspaceCollectionList,WorkspaceCollectionAccessKeys:WorkspaceCollectionAccessKeys,WorkspaceCollectionAccessKey:WorkspaceCollectionAccessKey,OperationList:OperationList,Operation:Operation,Display:Display,WorkspaceList:WorkspaceList,Workspace:Workspace,MigrateWorkspaceCollectionRequest:MigrateWorkspaceCollectionRequest});const accept={parameterPath:"accept",mapper:{defaultValue:"application/json",isConstant:!0,serializedName:"Accept",type:{name:"String"}}},$host={parameterPath:"$host",mapper:{serializedName:"$host",required:!0,type:{name:"String"}},skipEncoding:!0},subscriptionId={parameterPath:"subscriptionId",mapper:{serializedName:"subscriptionId",required:!0,type:{name:"String"}}},resourceGroupName={parameterPath:"resourceGroupName",mapper:{serializedName:"resourceGroupName",required:!0,type:{name:"String"}}},workspaceCollectionName={parameterPath:"workspaceCollectionName",mapper:{serializedName:"workspaceCollectionName",required:!0,type:{name:"String"}}},apiVersion={parameterPath:"apiVersion",mapper:{defaultValue:"2016-01-29",isConstant:!0,serializedName:"api-version",type:{name:"String"}}},contentType={parameterPath:["options","contentType"],mapper:{defaultValue:"application/json",isConstant:!0,serializedName:"Content-Type",type:{name:"String"}}},body={parameterPath:"body",mapper:CreateWorkspaceCollectionRequest},body1={parameterPath:"body",mapper:UpdateWorkspaceCollectionRequest},body2={parameterPath:"body",mapper:CheckNameRequest},location={parameterPath:"location",mapper:{serializedName:"location",required:!0,type:{name:"String"}}},body3={parameterPath:"body",mapper:WorkspaceCollectionAccessKey},body4={parameterPath:"body",mapper:MigrateWorkspaceCollectionRequest};class LroImpl{constructor(e,r,t,a=t.path,o=t.httpMethod){this.sendOperationFn=e,this.args=r,this.spec=t,this.requestPath=a,this.requestMethod=o}sendInitialRequest(){return tslib.__awaiter(this,void 0,void 0,function*(){return this.sendOperationFn(this.args,this.spec)})}sendPollRequest(r){return tslib.__awaiter(this,void 0,void 0,function*(){var e=this.spec,e=tslib.__rest(e,["requestBody"]);return this.sendOperationFn(this.args,Object.assign(Object.assign({},e),{path:r,httpMethod:"GET"}))})}}class WorkspaceCollectionsImpl{constructor(e){this.client=e}listByResourceGroup(r,t){const e=this.listByResourceGroupPagingAll(r,t);return{next(){return e.next()},[Symbol.asyncIterator](){return this},byPage:e=>{if(null!=e&&e.maxPageSize)throw new Error("maxPageSize is not supported by this operation.");return this.listByResourceGroupPagingPage(r,t,e)}}}listByResourceGroupPagingPage(r,t,e){return tslib.__asyncGenerator(this,arguments,function*(){var e=yield tslib.__await(this._listByResourceGroup(r,t));yield yield tslib.__await(e.value||[])})}listByResourceGroupPagingAll(s,i){return tslib.__asyncGenerator(this,arguments,function*(){var r,e;try{for(var t,a=tslib.__asyncValues(this.listByResourceGroupPagingPage(s,i));!(t=yield tslib.__await(a.next())).done;){var o=t.value;yield tslib.__await(yield*tslib.__asyncDelegator(tslib.__asyncValues(o)))}}catch(e){r={error:e}}finally{try{t&&!t.done&&(e=a.return)&&(yield tslib.__await(e.call(a)))}finally{if(r)throw r.error}}})}listBySubscription(r){const e=this.listBySubscriptionPagingAll(r);return{next(){return e.next()},[Symbol.asyncIterator](){return this},byPage:e=>{if(null!=e&&e.maxPageSize)throw new Error("maxPageSize is not supported by this operation.");return this.listBySubscriptionPagingPage(r,e)}}}listBySubscriptionPagingPage(r,e){return tslib.__asyncGenerator(this,arguments,function*(){var e=yield tslib.__await(this._listBySubscription(r));yield yield tslib.__await(e.value||[])})}listBySubscriptionPagingAll(s){return tslib.__asyncGenerator(this,arguments,function*(){var r,e;try{for(var t,a=tslib.__asyncValues(this.listBySubscriptionPagingPage(s));!(t=yield tslib.__await(a.next())).done;){var o=t.value;yield tslib.__await(yield*tslib.__asyncDelegator(tslib.__asyncValues(o)))}}catch(e){r={error:e}}finally{try{t&&!t.done&&(e=a.return)&&(yield tslib.__await(e.call(a)))}finally{if(r)throw r.error}}})}getByName(e,r,t){return this.client.sendOperationRequest({resourceGroupName:e,workspaceCollectionName:r,options:t},getByNameOperationSpec)}create(e,r,t,a){return this.client.sendOperationRequest({resourceGroupName:e,workspaceCollectionName:r,body:t,options:a},createOperationSpec)}update(e,r,t,a){return this.client.sendOperationRequest({resourceGroupName:e,workspaceCollectionName:r,body:t,options:a},updateOperationSpec)}beginDelete(r,t,a){return tslib.__awaiter(this,void 0,void 0,function*(){const s=(e,r)=>tslib.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(e,r)});var e=new LroImpl((r,o)=>tslib.__awaiter(this,void 0,void 0,function*(){let t=void 0;const a=null==(e=r.options)?void 0:e.onResponse;var e=Object.assign(Object.assign({},r),{options:Object.assign(Object.assign({},r.options),{onResponse:(e,r)=>{t=e,null!==a&&void 0!==a&&a(e,r)}})});return{flatResponse:yield s(e,o),rawResponse:{statusCode:t.status,body:t.parsedBody,headers:t.headers.toJSON()}}}),{resourceGroupName:r,workspaceCollectionName:t,options:a},deleteOperationSpec),e=new coreLro.LroEngine(e,{resumeFrom:null==a?void 0:a.resumeFrom,intervalInMs:null==a?void 0:a.updateIntervalInMs});return yield e.poll(),e})}beginDeleteAndWait(e,r,t){return tslib.__awaiter(this,void 0,void 0,function*(){return(yield this.beginDelete(e,r,t)).pollUntilDone()})}checkNameAvailability(e,r,t){return this.client.sendOperationRequest({location:e,body:r,options:t},checkNameAvailabilityOperationSpec)}_listByResourceGroup(e,r){return this.client.sendOperationRequest({resourceGroupName:e,options:r},listByResourceGroupOperationSpec)}_listBySubscription(e){return this.client.sendOperationRequest({options:e},listBySubscriptionOperationSpec)}getAccessKeys(e,r,t){return this.client.sendOperationRequest({resourceGroupName:e,workspaceCollectionName:r,options:t},getAccessKeysOperationSpec)}regenerateKey(e,r,t,a){return this.client.sendOperationRequest({resourceGroupName:e,workspaceCollectionName:r,body:t,options:a},regenerateKeyOperationSpec)}migrate(e,r,t){return this.client.sendOperationRequest({resourceGroupName:e,body:r,options:t},migrateOperationSpec)}}const serializer$2=coreClient__namespace.createSerializer(Mappers,!1),getByNameOperationSpec={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.PowerBI/workspaceCollections/{workspaceCollectionName}",httpMethod:"GET",responses:{200:{bodyMapper:WorkspaceCollection},default:{bodyMapper:ErrorModel}},queryParameters:[apiVersion],urlParameters:[$host,subscriptionId,resourceGroupName,workspaceCollectionName],headerParameters:[accept],serializer:serializer$2},createOperationSpec={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.PowerBI/workspaceCollections/{workspaceCollectionName}",httpMethod:"PUT",responses:{200:{bodyMapper:WorkspaceCollection},default:{bodyMapper:ErrorModel}},requestBody:body,queryParameters:[apiVersion],urlParameters:[$host,subscriptionId,resourceGroupName,workspaceCollectionName],headerParameters:[accept,contentType],mediaType:"json",serializer:serializer$2},updateOperationSpec={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.PowerBI/workspaceCollections/{workspaceCollectionName}",httpMethod:"PATCH",responses:{200:{bodyMapper:WorkspaceCollection},default:{bodyMapper:ErrorModel}},requestBody:body1,queryParameters:[apiVersion],urlParameters:[$host,subscriptionId,resourceGroupName,workspaceCollectionName],headerParameters:[accept,contentType],mediaType:"json",serializer:serializer$2},deleteOperationSpec={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.PowerBI/workspaceCollections/{workspaceCollectionName}",httpMethod:"DELETE",responses:{200:{},201:{},202:{},204:{},default:{bodyMapper:ErrorModel}},queryParameters:[apiVersion],urlParameters:[$host,subscriptionId,resourceGroupName,workspaceCollectionName],headerParameters:[accept],serializer:serializer$2},checkNameAvailabilityOperationSpec={path:"/subscriptions/{subscriptionId}/providers/Microsoft.PowerBI/locations/{location}/checkNameAvailability",httpMethod:"POST",responses:{200:{bodyMapper:CheckNameResponse},default:{bodyMapper:ErrorModel}},requestBody:body2,queryParameters:[apiVersion],urlParameters:[$host,subscriptionId,location],headerParameters:[accept,contentType],mediaType:"json",serializer:serializer$2},listByResourceGroupOperationSpec={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.PowerBI/workspaceCollections",httpMethod:"GET",responses:{200:{bodyMapper:WorkspaceCollectionList},default:{bodyMapper:ErrorModel}},queryParameters:[apiVersion],urlParameters:[$host,subscriptionId,resourceGroupName],headerParameters:[accept],serializer:serializer$2},listBySubscriptionOperationSpec={path:"/subscriptions/{subscriptionId}/providers/Microsoft.PowerBI/workspaceCollections",httpMethod:"GET",responses:{200:{bodyMapper:WorkspaceCollectionList},default:{bodyMapper:ErrorModel}},queryParameters:[apiVersion],urlParameters:[$host,subscriptionId],headerParameters:[accept],serializer:serializer$2},getAccessKeysOperationSpec={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.PowerBI/workspaceCollections/{workspaceCollectionName}/listKeys",httpMethod:"POST",responses:{200:{bodyMapper:WorkspaceCollectionAccessKeys},default:{bodyMapper:ErrorModel}},queryParameters:[apiVersion],urlParameters:[$host,subscriptionId,resourceGroupName,workspaceCollectionName],headerParameters:[accept],serializer:serializer$2},regenerateKeyOperationSpec={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.PowerBI/workspaceCollections/{workspaceCollectionName}/regenerateKey",httpMethod:"POST",responses:{200:{bodyMapper:WorkspaceCollectionAccessKeys},default:{bodyMapper:ErrorModel}},requestBody:body3,queryParameters:[apiVersion],urlParameters:[$host,subscriptionId,resourceGroupName,workspaceCollectionName],headerParameters:[accept,contentType],mediaType:"json",serializer:serializer$2},migrateOperationSpec={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/moveResources",httpMethod:"POST",responses:{200:{},default:{bodyMapper:ErrorModel}},requestBody:body4,queryParameters:[apiVersion],urlParameters:[$host,subscriptionId,resourceGroupName],headerParameters:[accept,contentType],mediaType:"json",serializer:serializer$2};class WorkspacesImpl{constructor(e){this.client=e}list(r,t,a){const e=this.listPagingAll(r,t,a);return{next(){return e.next()},[Symbol.asyncIterator](){return this},byPage:e=>{if(null!=e&&e.maxPageSize)throw new Error("maxPageSize is not supported by this operation.");return this.listPagingPage(r,t,a,e)}}}listPagingPage(r,t,a,e){return tslib.__asyncGenerator(this,arguments,function*(){var e=yield tslib.__await(this._list(r,t,a));yield yield tslib.__await(e.value||[])})}listPagingAll(s,i,n){return tslib.__asyncGenerator(this,arguments,function*(){var r,e;try{for(var t,a=tslib.__asyncValues(this.listPagingPage(s,i,n));!(t=yield tslib.__await(a.next())).done;){var o=t.value;yield tslib.__await(yield*tslib.__asyncDelegator(tslib.__asyncValues(o)))}}catch(e){r={error:e}}finally{try{t&&!t.done&&(e=a.return)&&(yield tslib.__await(e.call(a)))}finally{if(r)throw r.error}}})}_list(e,r,t){return this.client.sendOperationRequest({resourceGroupName:e,workspaceCollectionName:r,options:t},listOperationSpec)}}const serializer$1=coreClient__namespace.createSerializer(Mappers,!1),listOperationSpec={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.PowerBI/workspaceCollections/{workspaceCollectionName}/workspaces",httpMethod:"GET",responses:{200:{bodyMapper:WorkspaceList},default:{bodyMapper:ErrorModel}},queryParameters:[apiVersion],urlParameters:[$host,subscriptionId,resourceGroupName,workspaceCollectionName],headerParameters:[accept],serializer:serializer$1};class PowerBIEmbeddedManagementClient extends coreClient__namespace.ServiceClient{constructor(e,r,t){if(void 0===e)throw new Error("'credentials' cannot be null");if(void 0===r)throw new Error("'subscriptionId' cannot be null");var a,o="azsdk-js-arm-powerbiembedded/2.0.2",o=(t=t||{}).userAgentOptions&&t.userAgentOptions.userAgentPrefix?t.userAgentOptions.userAgentPrefix+" "+o:o,o=Object.assign(Object.assign(Object.assign({},{requestContentType:"application/json; charset=utf-8",credential:e}),t),{userAgentOptions:{userAgentPrefix:o},endpoint:null!=(o=null!=(o=t.endpoint)?o:t.baseUri)?o:"https://management.azure.com"});super(o);let s=!1;null!=t&&t.pipeline&&0<t.pipeline.getOrderedPolicies().length&&(a=t.pipeline.getOrderedPolicies(),s=a.some(e=>e.name===coreRestPipeline__namespace.bearerTokenAuthenticationPolicyName)),t&&t.pipeline&&0!=t.pipeline.getOrderedPolicies().length&&s||(this.pipeline.removePolicy({name:coreRestPipeline__namespace.bearerTokenAuthenticationPolicyName}),this.pipeline.addPolicy(coreRestPipeline__namespace.bearerTokenAuthenticationPolicy({credential:e,scopes:null!=(a=o.credentialScopes)?a:o.endpoint+"/.default",challengeCallbacks:{authorizeRequestOnChallenge:coreClient__namespace.authorizeRequestOnClaimChallenge}}))),this.subscriptionId=r,this.$host=t.$host||"https://management.azure.com",this.apiVersion=t.apiVersion||"2016-01-29",this.workspaceCollections=new WorkspaceCollectionsImpl(this),this.workspaces=new WorkspacesImpl(this),this.addCustomApiVersionPolicy(t.apiVersion)}addCustomApiVersionPolicy(o){o&&this.pipeline.addPolicy({name:"CustomApiVersionPolicy",sendRequest(t,a){return tslib.__awaiter(this,void 0,void 0,function*(){var e,r=t.url.split("?");return 1<r.length&&(e=r[1].split("&").map(e=>-1<e.indexOf("api-version")?"api-version="+o:e),t.url=r[0]+"?"+e.join("&")),a(t)})}})}getAvailableOperations(e){return this.sendOperationRequest({options:e},getAvailableOperationsOperationSpec)}}const serializer=coreClient__namespace.createSerializer(Mappers,!1),getAvailableOperationsOperationSpec={path:"/providers/Microsoft.PowerBI/operations",httpMethod:"GET",responses:{200:{bodyMapper:OperationList},default:{bodyMapper:ErrorModel}},queryParameters:[apiVersion],urlParameters:[$host],headerParameters:[accept],serializer:serializer};exports.PowerBIEmbeddedManagementClient=PowerBIEmbeddedManagementClient,exports.getContinuationToken=getContinuationToken;